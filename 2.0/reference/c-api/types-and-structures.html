
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python types and C-structures &#8212; NumPy v2.0 Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../../_static/numpy.css?v=f033eccb" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../../_static/documentation_options.js?v=db988ed8"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="../../_static/scipy-mathjax/MathJax.js?config=scipy-mathjax"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/c-api/types-and-structures';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.3';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://numpy.org/doc/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="System configuration" href="config.html" />
    <link rel="prev" title="NumPy C-API" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Jun 16, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../_static/numpylogo.svg" class="logo__image only-light" alt="NumPy v2.0 Manual - Home"/>
    <script>document.write(`<img src="../../_static/numpylogo_dark.svg" class="logo__image only-dark" alt="NumPy v2.0 Manual - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    API reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../release.html">
    Release notes
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>

            <li class="nav-item dropdown pst-header-nav-item">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class="nav-item ">
  <a class="nav-link dropdown-item nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    API reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../building/index.html">
    Building from source
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../dev/index.html">
    Development
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../../release.html">
    Release notes
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-external" href="https://numpy.org/numpy-tutorials/">
    Learn
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-external" href="https://numpy.org/neps">
    NEPs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/numpy/numpy" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../module_structure.html">NumPy’s module structure</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../arrays.html">Array objects</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ufuncs.html">Universal functions (<code class="xref py py-class docutils literal notranslate"><span class="pre">ufunc</span></code>)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../routines.html">Routines and objects by topic</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../typing.html">Typing (<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy.typing</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distutils.html">Packaging (<code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy.distutils</span></code>)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">NumPy C-API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Python types and C-structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">System configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="dtype.html">Data type API</a></li>
<li class="toctree-l2"><a class="reference internal" href="array.html">Array API</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterator.html">Array iterator API</a></li>
<li class="toctree-l2"><a class="reference internal" href="ufunc.html">ufunc API</a></li>
<li class="toctree-l2"><a class="reference internal" href="generalized-ufuncs.html">Generalized universal function API</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings.html">NpyString API</a></li>
<li class="toctree-l2"><a class="reference internal" href="coremath.html">NumPy core math library</a></li>
<li class="toctree-l2"><a class="reference internal" href="datetimes.html">Datetime API</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecations.html">C API deprecations</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_memory.html">Memory management in NumPy</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../array_api.html">Array API standard compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simd/index.html">CPU/SIMD optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../global_state.html">Global state</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">NumPy security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distutils_status_migration.html">Status of <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> and migration advice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distutils_guide.html"><code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> user guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../swig.html">NumPy and SWIG</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">NumPy reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">NumPy C-API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Python...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="python-types-and-c-structures">
<h1>Python types and C-structures<a class="headerlink" href="#python-types-and-c-structures" title="Link to this heading">#</a></h1>
<p>Several new types are defined in the C-code. Most of these are
accessible from Python, but a few are not exposed due to their limited
use. Every new Python type has an associated <span class="c-expr sig sig-inline c"><a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n">PyObject</span></a><span class="p">*</span></span> with an
internal structure that includes a pointer to a “method table” that
defines how the new object behaves in Python. When you receive a
Python object into C code, you always get a pointer to a
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyObject</span></code></a> structure. Because a <a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyObject</span></code></a> structure is
very generic and defines only <a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject_HEAD" title="(in Python v3.12)"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_HEAD</span></code></a>, by itself it
is not very interesting. However, different objects contain more
details after the <a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject_HEAD" title="(in Python v3.12)"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_HEAD</span></code></a> (but you have to cast to the
correct type to access them — or use accessor functions or macros).</p>
<section id="new-python-types-defined">
<h2>New Python types defined<a class="headerlink" href="#new-python-types-defined" title="Link to this heading">#</a></h2>
<p>Python types are the functional equivalent in C of classes in Python.
By constructing a new Python type you make available a new object for
Python. The ndarray object is an example of a new type defined in C.
New types are defined in C by two basic steps:</p>
<ol class="arabic simple">
<li><p>creating a C-structure (usually named <code class="docutils literal notranslate"><span class="pre">Py{Name}Object</span></code>) that is
binary- compatible with the <a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyObject</span></code></a> structure itself but holds
the additional information needed for that particular object;</p></li>
<li><p>populating the <a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyTypeObject</span></code></a> table (pointed to by the ob_type
member of the <a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyObject</span></code></a> structure) with pointers to functions
that implement the desired behavior for the type.</p></li>
</ol>
<p>Instead of special method names which define behavior for Python
classes, there are “function tables” which point to functions that
implement the desired results. Since Python 2.2, the PyTypeObject
itself has become dynamic which allows C types that can be “sub-typed
“from other C-types in C, and sub-classed in Python. The children
types inherit the attributes and methods from their parent(s).</p>
<p>There are two major new types: the ndarray ( <a class="reference internal" href="#c.PyArray_Type" title="PyArray_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_Type</span></code></a> )
and the ufunc ( <a class="reference internal" href="#c.PyUFunc_Type" title="PyUFunc_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_Type</span></code></a> ). Additional types play a
supportive role: the <a class="reference internal" href="#c.PyArrayIter_Type" title="PyArrayIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayIter_Type</span></code></a>, the
<a class="reference internal" href="#c.PyArrayMultiIter_Type" title="PyArrayMultiIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayMultiIter_Type</span></code></a>, and the <a class="reference internal" href="#c.PyArrayDescr_Type" title="PyArrayDescr_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayDescr_Type</span></code></a>
. The <a class="reference internal" href="#c.PyArrayIter_Type" title="PyArrayIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayIter_Type</span></code></a> is the type for a flat iterator for an
ndarray (the object that is returned when getting the flat
attribute). The <a class="reference internal" href="#c.PyArrayMultiIter_Type" title="PyArrayMultiIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayMultiIter_Type</span></code></a> is the type of the
object returned when calling <code class="docutils literal notranslate"><span class="pre">broadcast</span></code>. It handles iteration and
broadcasting over a collection of nested sequences. Also, the
<a class="reference internal" href="#c.PyArrayDescr_Type" title="PyArrayDescr_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayDescr_Type</span></code></a> is the data-type-descriptor type whose
instances describe the data and <a class="reference internal" href="#c.PyArray_DTypeMeta" title="PyArray_DTypeMeta"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_DTypeMeta</span></code></a> is the
metaclass for data-type descriptors.  There are also new scalar-array
types which are new Python scalars corresponding to each of the
fundamental data types available for arrays. Additional types are
placeholders that allow the array scalars to fit into a hierarchy of
actual Python types. Finally, the <a class="reference internal" href="#c.PyArray_DTypeMeta" title="PyArray_DTypeMeta"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_DTypeMeta</span></code></a> instances
corresponding to the NumPy built-in data types are also publicly
visible.</p>
<section id="pyarray-type-and-pyarrayobject">
<h3>PyArray_Type and PyArrayObject<a class="headerlink" href="#pyarray-type-and-pyarrayobject" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArray_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_Type</span></span></span><a class="headerlink" href="#c.PyArray_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>The Python type of the ndarray is <a class="reference internal" href="#c.PyArray_Type" title="PyArray_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_Type</span></code></a>. In C, every
ndarray is a pointer to a <a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayObject</span></code></a> structure. The ob_type
member of this structure contains a pointer to the <a class="reference internal" href="#c.PyArray_Type" title="PyArray_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_Type</span></code></a>
typeobject.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayObject</span></span></span><a class="headerlink" href="#c.PyArrayObject" title="Link to this definition">#</a><br /></dt>
<dt class="sig sig-object c" id="c.NPY_AO">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">NPY_AO</span></span></span><a class="headerlink" href="#c.NPY_AO" title="Link to this definition">#</a><br /></dt>
<dd><p>The <a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayObject</span></code></a> C-structure contains all of the required
information for an array. All instances of an ndarray (and its
subclasses) will have this structure.  For future compatibility,
these structure members should normally be accessed using the
provided macros. If you need a shorter name, then you can make use
of <a class="reference internal" href="#c.NPY_AO" title="NPY_AO"><code class="xref c c-type docutils literal notranslate"><span class="pre">NPY_AO</span></code></a> (deprecated) which is defined to be equivalent to
<a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayObject</span></code></a>. Direct access to the struct fields are
deprecated. Use the <code class="docutils literal notranslate"><span class="pre">PyArray_*(arr)</span></code> form instead.
As of NumPy 1.20, the size of this struct is not considered part of
the NumPy ABI (see note at the end of the member list).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">PyArrayObject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nd</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">dimensions</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">strides</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">base</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_Descr</span><span class="w"> </span><span class="o">*</span><span class="n">descr</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">weakreflist</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/* version dependent private members */</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayObject</span><span class="p">;</span>
</pre></div>
</div>
<dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject_HEAD" title="(in Python v3.12)"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_HEAD</span></code></a></dt><dd><p>This is needed by all Python objects. It consists of (at least)
a reference count member ( <code class="docutils literal notranslate"><span class="pre">ob_refcnt</span></code> ) and a pointer to the
typeobject ( <code class="docutils literal notranslate"><span class="pre">ob_type</span></code> ). (Other elements may also be present
if Python was compiled with special options see
Include/object.h in the Python source tree for more
information). The ob_type member points to a Python type
object.</p>
</dd>
</dl>
<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.data">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#c.NPY_AO.data" title="Link to this definition">#</a><br /></dt>
<dd><p>Accessible via <a class="reference internal" href="array.html#c.PyArray_DATA" title="PyArray_DATA"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_DATA</span></code></a>, this data member is a
pointer to the first element of the array. This pointer can
(and normally should) be recast to the data type of the array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.nd">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nd</span></span></span><a class="headerlink" href="#c.NPY_AO.nd" title="Link to this definition">#</a><br /></dt>
<dd><p>An integer providing the number of dimensions for this
array. When nd is 0, the array is sometimes called a rank-0
array. Such arrays have undefined dimensions and strides and
cannot be accessed. Macro <a class="reference internal" href="array.html#c.PyArray_NDIM" title="PyArray_NDIM"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_NDIM</span></code></a> defined in
<code class="docutils literal notranslate"><span class="pre">ndarraytypes.h</span></code> points to this data member.
<code class="docutils literal notranslate"><span class="pre">NPY_MAXDIMS</span></code> is defined as a compile time constant limiting the
number of dimensions.  This number is 64 since NumPy 2 and was 32
before. However, we may wish to remove this limitations in the future
so that it is best to explicitly check dimensionality for code
that relies on such an upper bound.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.dimensions">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dimensions</span></span></span><a class="headerlink" href="#c.NPY_AO.dimensions" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of integers providing the shape in each dimension as
long as nd <span class="math notranslate nohighlight">\(\geq\)</span> 1. The integer is always large enough
to hold a pointer on the platform, so the dimension size is
only limited by memory. <a class="reference internal" href="array.html#c.PyArray_DIMS" title="PyArray_DIMS"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_DIMS</span></code></a> is the macro
associated with this data member.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.strides">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">strides</span></span></span><a class="headerlink" href="#c.NPY_AO.strides" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of integers providing for each dimension the number of
bytes that must be skipped to get to the next element in that
dimension. Associated with macro <a class="reference internal" href="array.html#c.PyArray_STRIDES" title="PyArray_STRIDES"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_STRIDES</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.base">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#c.NPY_AO.base" title="Link to this definition">#</a><br /></dt>
<dd><p>Pointed to by <a class="reference internal" href="array.html#c.PyArray_BASE" title="PyArray_BASE"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_BASE</span></code></a>, this member is used to hold a
pointer to another Python object that is related to this array.
There are two use cases:</p>
<ul class="simple">
<li><p>If this array does not own its own memory, then base points to the
Python object that owns it (perhaps another array object)</p></li>
<li><p>If this array has the <a class="reference internal" href="array.html#c.NPY_ARRAY_WRITEBACKIFCOPY" title="NPY_ARRAY_WRITEBACKIFCOPY"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEBACKIFCOPY</span></code></a> flag set,
then this array is a working copy of a “misbehaved” array.</p></li>
</ul>
<p>When <code class="docutils literal notranslate"><span class="pre">PyArray_ResolveWritebackIfCopy</span></code> is called, the array pointed to
by base will be updated with the contents of this array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.descr">
<a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">descr</span></span></span><a class="headerlink" href="#c.NPY_AO.descr" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a data-type descriptor object (see below). The
data-type descriptor object is an instance of a new built-in
type which allows a generic description of memory. There is a
descriptor structure for each data type supported. This
descriptor structure contains useful information about the type
as well as a pointer to a table of function pointers to
implement specific functionality. As the name suggests, it is
associated with the macro <a class="reference internal" href="array.html#c.PyArray_DESCR" title="PyArray_DESCR"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_DESCR</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.flags">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.NPY_AO.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Pointed to by the macro <a class="reference internal" href="array.html#c.PyArray_FLAGS" title="PyArray_FLAGS"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_FLAGS</span></code></a>, this data member represents
the flags indicating how the memory pointed to by data is to be
interpreted. Possible flags are <a class="reference internal" href="array.html#c.NPY_ARRAY_C_CONTIGUOUS" title="NPY_ARRAY_C_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_C_CONTIGUOUS</span></code></a>,
<a class="reference internal" href="array.html#c.NPY_ARRAY_F_CONTIGUOUS" title="NPY_ARRAY_F_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_F_CONTIGUOUS</span></code></a>, <a class="reference internal" href="array.html#c.NPY_ARRAY_OWNDATA" title="NPY_ARRAY_OWNDATA"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_OWNDATA</span></code></a>,
<a class="reference internal" href="array.html#c.NPY_ARRAY_ALIGNED" title="NPY_ARRAY_ALIGNED"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_ALIGNED</span></code></a>, <a class="reference internal" href="array.html#c.NPY_ARRAY_WRITEABLE" title="NPY_ARRAY_WRITEABLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEABLE</span></code></a>,
<a class="reference internal" href="array.html#c.NPY_ARRAY_WRITEBACKIFCOPY" title="NPY_ARRAY_WRITEBACKIFCOPY"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEBACKIFCOPY</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.NPY_AO.weakreflist">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">weakreflist</span></span></span><a class="headerlink" href="#c.NPY_AO.weakreflist" title="Link to this definition">#</a><br /></dt>
<dd><p>This member allows array objects to have weak references (using the
weakref module).</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Further members are considered private and version dependent. If the size
of the struct is important for your code, special care must be taken.
A possible use-case when this is relevant is subclassing in C.
If your code relies on <code class="docutils literal notranslate"><span class="pre">sizeof(PyArrayObject)</span></code> to be constant,
you must add the following check at import time:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">PyArrayObject</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">PyArray_Type</span><span class="p">.</span><span class="n">tp_basicsize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyErr_SetString</span><span class="p">(</span><span class="n">PyExc_ImportError</span><span class="p">,</span>
<span class="w">       </span><span class="s">&quot;Binary incompatibility with NumPy, must recompile/update X.&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To ensure that your code does not have to be compiled for a specific
NumPy version, you may add a constant, leaving room for changes in NumPy.
A solution guaranteed to be compatible with any future NumPy version
requires the use of a runtime calculate offset and allocation size.</p>
</div>
</dd></dl>

<p>The <a class="reference internal" href="#c.PyArray_Type" title="PyArray_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_Type</span></code></a> typeobject implements many of the features of
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">Python</span> <span class="pre">objects</span></code></a> including the <a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_as_number" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_as_number</span></code></a>, <a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_as_sequence" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_as_sequence</span></code></a>, <a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_as_mapping" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_as_mapping</span></code></a>, and <a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_as_buffer" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_as_buffer</span></code></a> interfaces. The <a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.richcmpfunc" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">rich</span> <span class="pre">comparison</span></code></a>) is also used along with new-style attribute lookup for
member (<a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_members" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_members</span></code></a>) and properties
(<a class="reference external" href="https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_getset" title="(in Python v3.12)"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_getset</span></code></a>).
The <a class="reference internal" href="#c.PyArray_Type" title="PyArray_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArray_Type</span></code></a> can also be sub-typed.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tp_as_number</span></code> methods use a generic approach to call whatever
function has been registered for handling the operation.  When the
<code class="docutils literal notranslate"><span class="pre">_multiarray_umath</span> <span class="pre">module</span></code> is imported, it sets the numeric operations
for all arrays to the corresponding ufuncs. This choice can be changed with
<a class="reference internal" href="ufunc.html#c.PyUFunc_ReplaceLoopBySignature" title="PyUFunc_ReplaceLoopBySignature"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUFunc_ReplaceLoopBySignature</span></code></a> The <code class="docutils literal notranslate"><span class="pre">tp_str</span></code> and <code class="docutils literal notranslate"><span class="pre">tp_repr</span></code>
methods can also be altered using <a class="reference internal" href="array.html#c.PyArray_SetStringFunction" title="PyArray_SetStringFunction"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_SetStringFunction</span></code></a>.</p>
</div>
</section>
<section id="pygenericarrtype-type">
<h3>PyGenericArrType_Type<a class="headerlink" href="#pygenericarrtype-type" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyGenericArrType_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyGenericArrType_Type</span></span></span><a class="headerlink" href="#c.PyGenericArrType_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>The <a class="reference internal" href="#c.PyGenericArrType_Type" title="PyGenericArrType_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyGenericArrType_Type</span></code></a> is the PyTypeObject definition which
create the <a class="reference internal" href="../arrays.scalars.html#numpy.generic" title="numpy.generic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.generic</span></code></a> python type.</p>
</dd></dl>

</section>
<section id="pyarraydescr-type-and-pyarray-descr">
<h3>PyArrayDescr_Type and PyArray_Descr<a class="headerlink" href="#pyarraydescr-type-and-pyarray-descr" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayDescr_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayDescr_Type</span></span></span><a class="headerlink" href="#c.PyArrayDescr_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>The <a class="reference internal" href="#c.PyArrayDescr_Type" title="PyArrayDescr_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayDescr_Type</span></code></a> is the built-in type of the
data-type-descriptor objects used to describe how the bytes comprising
the array are to be interpreted.  There are 21 statically-defined
<a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_Descr</span></code></a> objects for the built-in data-types. While these
participate in reference counting, their reference count should never
reach zero.  There is also a dynamic table of user-defined
<a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_Descr</span></code></a> objects that is also maintained. Once a
data-type-descriptor object is “registered” it should never be
deallocated either. The function <a class="reference internal" href="array.html#c.PyArray_DescrFromType" title="PyArray_DescrFromType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_DescrFromType</span></code></a> (…) can
be used to retrieve a <a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_Descr</span></code></a> object from an enumerated
type-number (either built-in or user- defined).</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_DescrProto">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_DescrProto</span></span></span><a class="headerlink" href="#c.PyArray_DescrProto" title="Link to this definition">#</a><br /></dt>
<dd><p>Identical structure to <a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_Descr</span></code></a>. This struct is used
for static definition of a prototype for registering a new legacy
DType by <a class="reference internal" href="array.html#c.PyArray_RegisterDataType" title="PyArray_RegisterDataType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_RegisterDataType</span></code></a>.</p>
<p>See the note in <a class="reference internal" href="array.html#c.PyArray_RegisterDataType" title="PyArray_RegisterDataType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_RegisterDataType</span></code></a> for details.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_Descr">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_Descr</span></span></span><a class="headerlink" href="#c.PyArray_Descr" title="Link to this definition">#</a><br /></dt>
<dd><p>The <a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_Descr</span></code></a> structure lies at the heart of the
<a class="reference internal" href="#c.PyArrayDescr_Type" title="PyArrayDescr_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayDescr_Type</span></code></a>. While it is described here for
completeness, it should be considered internal to NumPy and manipulated via
<code class="docutils literal notranslate"><span class="pre">PyArrayDescr_*</span></code> or <code class="docutils literal notranslate"><span class="pre">PyDataType*</span></code> functions and macros. The size of this
structure is subject to change across versions of NumPy. To ensure
compatibility:</p>
<ul class="simple">
<li><p>Never declare a non-pointer instance of the struct</p></li>
<li><p>Never perform pointer arithmetic</p></li>
<li><p>Never use <code class="docutils literal notranslate"><span class="pre">sizeof(PyArray_Descr)</span></code></p></li>
</ul>
<p>It has the following structure:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="n">PyTypeObject</span><span class="w"> </span><span class="o">*</span><span class="n">typeobj</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">kind</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">byteorder</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">_former_flags</span><span class="p">;</span><span class="w">  </span><span class="c1">// unused field</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">type_num</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">     * Definitions after this one must be accessed through accessor</span>
<span class="cm">     * functions (see below) when compiling with NumPy 1.x support.</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">npy_uint64</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">elsize</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">alignment</span><span class="p">;</span>
<span class="w">    </span><span class="n">NpyAuxData</span><span class="w"> </span><span class="o">*</span><span class="n">c_metadata</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_hash_t</span><span class="w"> </span><span class="n">hash</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">reserved_null</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w">  </span><span class="c1">// unused field, must be NULLed.</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArray_Descr</span><span class="p">;</span>
</pre></div>
</div>
<p>Some dtypes have additional members which are accessible through
<em class="xref py py-obj">PyDataType_NAMES</em>, <em class="xref py py-obj">PyDataType_FIELDS</em>, <em class="xref py py-obj">PyDataType_SUBARRAY</em>, and
in some cases (times) <em class="xref py py-obj">PyDataType_C_METADATA</em>.</p>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.typeobj">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">typeobj</span></span></span><a class="headerlink" href="#c.PyArray_Descr.typeobj" title="Link to this definition">#</a><br /></dt>
<dd><p>Pointer to a typeobject that is the corresponding Python type for
the elements of this array. For the builtin types, this points to
the corresponding array scalar. For user-defined types, this
should point to a user-defined typeobject. This typeobject can
either inherit from array scalars or not. If it does not inherit
from array scalars, then the <a class="reference internal" href="#c.NPY_USE_GETITEM" title="NPY_USE_GETITEM"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_USE_GETITEM</span></code></a> and
<a class="reference internal" href="#c.NPY_USE_SETITEM" title="NPY_USE_SETITEM"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_USE_SETITEM</span></code></a> flags should be set in the <code class="docutils literal notranslate"><span class="pre">flags</span></code> member.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.kind">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">kind</span></span></span><a class="headerlink" href="#c.PyArray_Descr.kind" title="Link to this definition">#</a><br /></dt>
<dd><p>A character code indicating the kind of array (using the array
interface typestring notation). A ‘b’ represents Boolean, a ‘i’
represents signed integer, a ‘u’ represents unsigned integer, ‘f’
represents floating point, ‘c’ represents complex floating point, ‘S’
represents 8-bit zero-terminated bytes, ‘U’ represents 32-bit/character
unicode string, and ‘V’ represents arbitrary.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.type">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><a class="headerlink" href="#c.PyArray_Descr.type" title="Link to this definition">#</a><br /></dt>
<dd><p>A traditional character code indicating the data type.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.byteorder">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">byteorder</span></span></span><a class="headerlink" href="#c.PyArray_Descr.byteorder" title="Link to this definition">#</a><br /></dt>
<dd><p>A character indicating the byte-order: ‘&gt;’ (big-endian), ‘&lt;’ (little-
endian), ‘=’ (native), ‘|’ (irrelevant, ignore). All builtin data-
types have byteorder ‘=’.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.flags">
<a class="reference internal" href="dtype.html#c.npy_uint64" title="npy_uint64"><span class="n"><span class="pre">npy_uint64</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArray_Descr.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>A data-type bit-flag that determines if the data-type exhibits object-
array like behavior. Each bit in this member is a flag which are named
as:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.NPY_ITEM_REFCOUNT" title="NPY_ITEM_REFCOUNT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_ITEM_REFCOUNT</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_ITEM_HASOBJECT" title="NPY_ITEM_HASOBJECT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_ITEM_HASOBJECT</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_LIST_PICKLE" title="NPY_LIST_PICKLE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_LIST_PICKLE</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_ITEM_IS_POINTER" title="NPY_ITEM_IS_POINTER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_ITEM_IS_POINTER</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_NEEDS_INIT" title="NPY_NEEDS_INIT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_NEEDS_INIT</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_NEEDS_PYAPI" title="NPY_NEEDS_PYAPI"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_NEEDS_PYAPI</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_USE_GETITEM" title="NPY_USE_GETITEM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_USE_GETITEM</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_USE_SETITEM" title="NPY_USE_SETITEM"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_USE_SETITEM</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_FROM_FIELDS" title="NPY_FROM_FIELDS"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_FROM_FIELDS</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.NPY_OBJECT_DTYPE_FLAGS" title="NPY_OBJECT_DTYPE_FLAGS"><code class="xref c c-macro docutils literal notranslate"><span class="pre">NPY_OBJECT_DTYPE_FLAGS</span></code></a></p></li>
</ul>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.type_num">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type_num</span></span></span><a class="headerlink" href="#c.PyArray_Descr.type_num" title="Link to this definition">#</a><br /></dt>
<dd><p>A number that uniquely identifies the data type. For new data-types,
this number is assigned when the data-type is registered.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.elsize">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">elsize</span></span></span><a class="headerlink" href="#c.PyArray_Descr.elsize" title="Link to this definition">#</a><br /></dt>
<dd><p>For data types that are always the same size (such as long), this
holds the size of the data type. For flexible data types where
different arrays can have a different elementsize, this should be
0.</p>
<p>See <em class="xref py py-obj">PyDataType_ELSIZE</em> and <em class="xref py py-obj">PyDataType_SET_ELSIZE</em> for a way to access
this field in a NumPy 1.x compatible way.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.alignment">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">alignment</span></span></span><a class="headerlink" href="#c.PyArray_Descr.alignment" title="Link to this definition">#</a><br /></dt>
<dd><p>A number providing alignment information for this data type.
Specifically, it shows how far from the start of a 2-element
structure (whose first element is a <code class="docutils literal notranslate"><span class="pre">char</span></code> ), the compiler
places an item of this type: <code class="docutils literal notranslate"><span class="pre">offsetof(struct</span> <span class="pre">{char</span> <span class="pre">c;</span> <span class="pre">type</span> <span class="pre">v;},</span>
<span class="pre">v)</span></code></p>
<p>See <em class="xref py py-obj">PyDataType_ALIGNMENT</em> for a way to access this field in a NumPy 1.x
compatible way.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.metadata">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">metadata</span></span></span><a class="headerlink" href="#c.PyArray_Descr.metadata" title="Link to this definition">#</a><br /></dt>
<dd><p>Metadata about this dtype.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.c_metadata">
<a class="reference internal" href="array.html#c.NpyAuxData" title="NpyAuxData"><span class="n"><span class="pre">NpyAuxData</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">c_metadata</span></span></span><a class="headerlink" href="#c.PyArray_Descr.c_metadata" title="Link to this definition">#</a><br /></dt>
<dd><p>Metadata specific to the C implementation
of the particular dtype. Added for NumPy 1.7.0.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_Descr.npy_hash_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">npy_hash_t</span></span></span><a class="headerlink" href="#c.PyArray_Descr.npy_hash_t" title="Link to this definition">#</a><br /></dt>
<dd></dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Descr.hash">
<a class="reference internal" href="#c.PyArray_Descr.npy_hash_t" title="npy_hash_t"><span class="n"><span class="pre">npy_hash_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">hash</span></span></span><a class="headerlink" href="#c.PyArray_Descr.hash" title="Link to this definition">#</a><br /></dt>
<dd><p>Used for caching hash values.</p>
</dd></dl>

</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_ITEM_REFCOUNT">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_ITEM_REFCOUNT</span></span></span><a class="headerlink" href="#c.NPY_ITEM_REFCOUNT" title="Link to this definition">#</a><br /></dt>
<dd><p>Indicates that items of this data-type must be reference
counted (using <a class="reference external" href="https://docs.python.org/3/c-api/refcounting.html#c.Py_INCREF" title="(in Python v3.12)"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_INCREF</span></code></a> and <a class="reference external" href="https://docs.python.org/3/c-api/refcounting.html#c.Py_DECREF" title="(in Python v3.12)"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_DECREF</span></code></a> ).</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_ITEM_HASOBJECT">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_ITEM_HASOBJECT</span></span></span><a class="headerlink" href="#c.NPY_ITEM_HASOBJECT" title="Link to this definition">#</a><br /></dt>
<dd><p>Same as <a class="reference internal" href="#c.NPY_ITEM_REFCOUNT" title="NPY_ITEM_REFCOUNT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ITEM_REFCOUNT</span></code></a>.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_LIST_PICKLE">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_LIST_PICKLE</span></span></span><a class="headerlink" href="#c.NPY_LIST_PICKLE" title="Link to this definition">#</a><br /></dt>
<dd><p>Indicates arrays of this data-type must be converted to a list
before pickling.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_ITEM_IS_POINTER">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_ITEM_IS_POINTER</span></span></span><a class="headerlink" href="#c.NPY_ITEM_IS_POINTER" title="Link to this definition">#</a><br /></dt>
<dd><p>Indicates the item is a pointer to some other data-type</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_NEEDS_INIT">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_NEEDS_INIT</span></span></span><a class="headerlink" href="#c.NPY_NEEDS_INIT" title="Link to this definition">#</a><br /></dt>
<dd><p>Indicates memory for this data-type must be initialized (set
to 0) on creation.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_NEEDS_PYAPI">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_NEEDS_PYAPI</span></span></span><a class="headerlink" href="#c.NPY_NEEDS_PYAPI" title="Link to this definition">#</a><br /></dt>
<dd><p>Indicates this data-type requires the Python C-API during
access (so don’t give up the GIL if array access is going to
be needed).</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_USE_GETITEM">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_USE_GETITEM</span></span></span><a class="headerlink" href="#c.NPY_USE_GETITEM" title="Link to this definition">#</a><br /></dt>
<dd><p>On array access use the <code class="docutils literal notranslate"><span class="pre">f-&gt;getitem</span></code> function pointer
instead of the standard conversion to an array scalar. Must
use if you don’t define an array scalar to go along with
the data-type.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_USE_SETITEM">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_USE_SETITEM</span></span></span><a class="headerlink" href="#c.NPY_USE_SETITEM" title="Link to this definition">#</a><br /></dt>
<dd><p>When creating a 0-d array from an array scalar use
<code class="docutils literal notranslate"><span class="pre">f-&gt;setitem</span></code> instead of the standard copy from an array
scalar. Must use if you don’t define an array scalar to go
along with the data-type.</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_FROM_FIELDS">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_FROM_FIELDS</span></span></span><a class="headerlink" href="#c.NPY_FROM_FIELDS" title="Link to this definition">#</a><br /></dt>
<dd><p>The bits that are inherited for the parent data-type if these
bits are set in any field of the data-type. Currently (
<a class="reference internal" href="#c.NPY_NEEDS_INIT" title="NPY_NEEDS_INIT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NEEDS_INIT</span></code></a> | <a class="reference internal" href="#c.NPY_LIST_PICKLE" title="NPY_LIST_PICKLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_LIST_PICKLE</span></code></a> |
<a class="reference internal" href="#c.NPY_ITEM_REFCOUNT" title="NPY_ITEM_REFCOUNT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ITEM_REFCOUNT</span></code></a> | <a class="reference internal" href="#c.NPY_NEEDS_PYAPI" title="NPY_NEEDS_PYAPI"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NEEDS_PYAPI</span></code></a> ).</p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.NPY_OBJECT_DTYPE_FLAGS">
<span class="sig-name descname"><span class="n"><span class="pre">NPY_OBJECT_DTYPE_FLAGS</span></span></span><a class="headerlink" href="#c.NPY_OBJECT_DTYPE_FLAGS" title="Link to this definition">#</a><br /></dt>
<dd><p>Bits set for the object data-type: ( <a class="reference internal" href="#c.NPY_LIST_PICKLE" title="NPY_LIST_PICKLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_LIST_PICKLE</span></code></a>
| <a class="reference internal" href="#c.NPY_USE_GETITEM" title="NPY_USE_GETITEM"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_USE_GETITEM</span></code></a> | <a class="reference internal" href="#c.NPY_ITEM_IS_POINTER" title="NPY_ITEM_IS_POINTER"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ITEM_IS_POINTER</span></code></a> |
<a class="reference internal" href="#c.NPY_ITEM_REFCOUNT" title="NPY_ITEM_REFCOUNT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ITEM_REFCOUNT</span></code></a> | <a class="reference internal" href="#c.NPY_NEEDS_INIT" title="NPY_NEEDS_INIT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NEEDS_INIT</span></code></a> |
<a class="reference internal" href="#c.NPY_NEEDS_PYAPI" title="NPY_NEEDS_PYAPI"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NEEDS_PYAPI</span></code></a>).</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.PyDataType_FLAGCHK">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyDataType_FLAGCHK</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dtype</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyDataType_FLAGCHK" title="Link to this definition">#</a><br /></dt>
<dd><p>Return true if all the given flags are set for the data-type
object.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.PyDataType_REFCHK">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyDataType_REFCHK</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dtype</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyDataType_REFCHK" title="Link to this definition">#</a><br /></dt>
<dd><p>Equivalent to <a class="reference internal" href="#c.PyDataType_FLAGCHK" title="PyDataType_FLAGCHK"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyDataType_FLAGCHK</span></code></a> (<em>dtype</em>,
<a class="reference internal" href="#c.NPY_ITEM_REFCOUNT" title="NPY_ITEM_REFCOUNT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ITEM_REFCOUNT</span></code></a>).</p>
</dd></dl>

</section>
<section id="pyarray-arrfuncs">
<span id="arrfuncs-type"></span><h3>PyArray_ArrFuncs<a class="headerlink" href="#pyarray-arrfuncs" title="Link to this heading">#</a></h3>
<dl class="c function">
<dt class="sig sig-object c" id="c.PyDataType_GetArrFuncs">
<a class="reference internal" href="#c.PyArray_ArrFuncs" title="PyArray_ArrFuncs"><span class="n"><span class="pre">PyArray_ArrFuncs</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">PyDataType_GetArrFuncs</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dtype</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyDataType_GetArrFuncs" title="Link to this definition">#</a><br /></dt>
<dd><p>Fetch the legacy <em class="xref py py-obj">PyArray_ArrFuncs</em> of the datatype (cannot fail).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version NumPy: </span>2.0
This function was added in a backwards compatible and backportable
way in NumPy 2.0 (see <code class="docutils literal notranslate"><span class="pre">npy_2_compat.h</span></code>).
Any code that previously accessed the <code class="docutils literal notranslate"><span class="pre">-&gt;f</span></code> slot of the
<code class="docutils literal notranslate"><span class="pre">PyArray_Descr</span></code>, must now use this function and backport it to
compile with 1.x.
(The <code class="docutils literal notranslate"><span class="pre">npy_2_compat.h</span></code> header can be vendored for this purpose.)</p>
</div>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_ArrFuncs</span></span></span><a class="headerlink" href="#c.PyArray_ArrFuncs" title="Link to this definition">#</a><br /></dt>
<dd><p>Functions implementing internal features. Not all of these
function pointers must be defined for a given type. The required
members are <code class="docutils literal notranslate"><span class="pre">nonzero</span></code>, <code class="docutils literal notranslate"><span class="pre">copyswap</span></code>, <code class="docutils literal notranslate"><span class="pre">copyswapn</span></code>, <code class="docutils literal notranslate"><span class="pre">setitem</span></code>,
<code class="docutils literal notranslate"><span class="pre">getitem</span></code>, and <code class="docutils literal notranslate"><span class="pre">cast</span></code>. These are assumed to be non- <code class="docutils literal notranslate"><span class="pre">NULL</span></code>
and <code class="docutils literal notranslate"><span class="pre">NULL</span></code> entries will cause a program crash. The other
functions may be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> which will just mean reduced
functionality for that data-type. (Also, the nonzero function will
be filled in with a default function if it is <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when you
register a user-defined data-type).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyArray_VectorUnaryFunc</span><span class="w"> </span><span class="o">*</span><span class="n">cast</span><span class="p">[</span><span class="n">NPY_NTYPES_LEGACY</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArray_GetItemFunc</span><span class="w"> </span><span class="o">*</span><span class="n">getitem</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_SetItemFunc</span><span class="w"> </span><span class="o">*</span><span class="n">setitem</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_CopySwapNFunc</span><span class="w"> </span><span class="o">*</span><span class="n">copyswapn</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_CopySwapFunc</span><span class="w"> </span><span class="o">*</span><span class="n">copyswap</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_CompareFunc</span><span class="w"> </span><span class="o">*</span><span class="n">compare</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_ArgFunc</span><span class="w"> </span><span class="o">*</span><span class="n">argmax</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_DotFunc</span><span class="w"> </span><span class="o">*</span><span class="n">dotfunc</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_ScanFunc</span><span class="w"> </span><span class="o">*</span><span class="n">scanfunc</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_FromStrFunc</span><span class="w"> </span><span class="o">*</span><span class="n">fromstr</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_NonzeroFunc</span><span class="w"> </span><span class="o">*</span><span class="n">nonzero</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_FillFunc</span><span class="w"> </span><span class="o">*</span><span class="n">fill</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_FillWithScalarFunc</span><span class="w"> </span><span class="o">*</span><span class="n">fillwithscalar</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_SortFunc</span><span class="w"> </span><span class="o">*</span><span class="n">sort</span><span class="p">[</span><span class="n">NPY_NSORTS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArray_ArgSortFunc</span><span class="w"> </span><span class="o">*</span><span class="n">argsort</span><span class="p">[</span><span class="n">NPY_NSORTS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">castdict</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_ScalarKindFunc</span><span class="w"> </span><span class="o">*</span><span class="n">scalarkind</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">**</span><span class="n">cancastscalarkindto</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">cancastto</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_unused1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_unused2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_unused3</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_ArgFunc</span><span class="w"> </span><span class="o">*</span><span class="n">argmin</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArray_ArrFuncs</span><span class="p">;</span>
</pre></div>
</div>
<p>The concept of a behaved segment is used in the description of the
function pointers. A behaved segment is one that is aligned and in
native machine byte-order for the data-type. The <code class="docutils literal notranslate"><span class="pre">nonzero</span></code>,
<code class="docutils literal notranslate"><span class="pre">copyswap</span></code>, <code class="docutils literal notranslate"><span class="pre">copyswapn</span></code>, <code class="docutils literal notranslate"><span class="pre">getitem</span></code>, and <code class="docutils literal notranslate"><span class="pre">setitem</span></code>
functions can (and must) deal with mis-behaved arrays. The other
functions require behaved memory segments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functions are largely legacy API, however, some are still used.
As of NumPy 2.x they are only available via <em class="xref py py-obj">PyDataType_GetArrFuncs</em>
(see the function for more details).
Before using any function defined in the struct you should check
whether it is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.  In general, the functions <code class="docutils literal notranslate"><span class="pre">getitem</span></code>,
<code class="docutils literal notranslate"><span class="pre">setitem</span></code>, <code class="docutils literal notranslate"><span class="pre">copyswap</span></code>, and <code class="docutils literal notranslate"><span class="pre">copyswapn</span></code> can be expected to be
defined, but all functions are expected to be replaced with newer API.
For example, <code class="docutils literal notranslate"><span class="pre">PyArray_Pack</span></code> is a more powerful version of <code class="docutils literal notranslate"><span class="pre">setitem</span></code>
that for example correctly deals with casts.</p>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.cast">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cast</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">from</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">to</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">n</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fromarr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">toarr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.cast" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of function pointers to cast from the current type to
all of the other builtin types. Each function casts a
contiguous, aligned, and notswapped buffer pointed at by
<em>from</em> to a contiguous, aligned, and notswapped buffer pointed
at by <em>to</em> The number of items to cast is given by <em>n</em>, and
the arguments <em>fromarr</em> and <em>toarr</em> are interpreted as
PyArrayObjects for flexible arrays to get itemsize
information.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.getitem">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">getitem</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.getitem" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that returns a standard Python object
from a single element of the array object <em>arr</em> pointed to by
<em>data</em>. This function must be able to deal with “misbehaved
“(misaligned and/or swapped) arrays correctly.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.setitem">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">setitem</span></span></span><span class="sig-paren">(</span><a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">item</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.setitem" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that sets the Python object <em>item</em>
into the array, <em>arr</em>, at the position pointed to by <em>data</em>
. This function deals with “misbehaved” arrays. If successful,
a zero is returned, otherwise, a negative one is returned (and
a Python error set).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.copyswapn">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">copyswapn</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dest</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">dstride</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">sstride</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">n</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">swap</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.copyswapn" title="Link to this definition">#</a><br /></dt>
<dd></dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.copyswap">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">copyswap</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dest</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">swap</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.copyswap" title="Link to this definition">#</a><br /></dt>
<dd><p>These members are both pointers to functions to copy data from
<em>src</em> to <em>dest</em> and <em>swap</em> if indicated. The value of arr is
only used for flexible ( <a class="reference internal" href="dtype.html#c.NPY_TYPES.NPY_STRING" title="NPY_TYPES.NPY_STRING"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_STRING</span></code></a>, <a class="reference internal" href="dtype.html#c.NPY_TYPES.NPY_UNICODE" title="NPY_TYPES.NPY_UNICODE"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_UNICODE</span></code></a>,
and <a class="reference internal" href="dtype.html#c.NPY_TYPES.NPY_VOID" title="NPY_TYPES.NPY_VOID"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_VOID</span></code></a> ) arrays (and is obtained from
<code class="docutils literal notranslate"><span class="pre">arr-&gt;descr-&gt;elsize</span></code> ). The second function copies a single
value, while the first loops over n values with the provided
strides. These functions can deal with misbehaved <em>src</em>
data. If <em>src</em> is NULL then no copy is performed. If <em>swap</em> is
0, then no byteswapping occurs. It is assumed that <em>dest</em> and
<em>src</em> do not overlap. If they overlap, then use <code class="docutils literal notranslate"><span class="pre">memmove</span></code>
(…) first followed by <code class="docutils literal notranslate"><span class="pre">copyswap(n)</span></code> with NULL valued
<code class="docutils literal notranslate"><span class="pre">src</span></code>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.compare">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">compare</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">d1</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">d2</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.compare" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that compares two elements of the
array, <code class="docutils literal notranslate"><span class="pre">arr</span></code>, pointed to by <code class="docutils literal notranslate"><span class="pre">d1</span></code> and <code class="docutils literal notranslate"><span class="pre">d2</span></code>. This
function requires behaved (aligned and not swapped) arrays.
The return value is 1 if * <code class="docutils literal notranslate"><span class="pre">d1</span></code> &gt; * <code class="docutils literal notranslate"><span class="pre">d2</span></code>, 0 if * <code class="docutils literal notranslate"><span class="pre">d1</span></code> == *
<code class="docutils literal notranslate"><span class="pre">d2</span></code>, and -1 if * <code class="docutils literal notranslate"><span class="pre">d1</span></code> &lt; * <code class="docutils literal notranslate"><span class="pre">d2</span></code>. The array object <code class="docutils literal notranslate"><span class="pre">arr</span></code> is
used to retrieve itemsize and field information for flexible arrays.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.argmax">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">argmax</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">n</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">max_ind</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.argmax" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that retrieves the index of the
largest of <code class="docutils literal notranslate"><span class="pre">n</span></code> elements in <code class="docutils literal notranslate"><span class="pre">arr</span></code> beginning at the element
pointed to by <code class="docutils literal notranslate"><span class="pre">data</span></code>. This function requires that the
memory segment be contiguous and behaved. The return value is
always 0. The index of the largest element is returned in
<code class="docutils literal notranslate"><span class="pre">max_ind</span></code>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.dotfunc">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dotfunc</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ip1</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">is1</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ip2</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">is2</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">op</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">n</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.dotfunc" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that multiplies two <code class="docutils literal notranslate"><span class="pre">n</span></code> -length
sequences together, adds them, and places the result in
element pointed to by <code class="docutils literal notranslate"><span class="pre">op</span></code> of <code class="docutils literal notranslate"><span class="pre">arr</span></code>. The start of the two
sequences are pointed to by <code class="docutils literal notranslate"><span class="pre">ip1</span></code> and <code class="docutils literal notranslate"><span class="pre">ip2</span></code>. To get to
the next element in each sequence requires a jump of <code class="docutils literal notranslate"><span class="pre">is1</span></code>
and <code class="docutils literal notranslate"><span class="pre">is2</span></code> <em>bytes</em>, respectively. This function requires
behaved (though not necessarily contiguous) memory.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.scanfunc">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">scanfunc</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fd</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ip</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.scanfunc" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that scans (scanf style) one element
of the corresponding type from the file descriptor <code class="docutils literal notranslate"><span class="pre">fd</span></code> into
the array memory pointed to by <code class="docutils literal notranslate"><span class="pre">ip</span></code>. The array is assumed
to be behaved.
The last argument <code class="docutils literal notranslate"><span class="pre">arr</span></code> is the array to be scanned into.
Returns number of receiving arguments successfully assigned (which
may be zero in case a matching failure occurred before the first
receiving argument was assigned), or EOF if input failure occurs
before the first receiving argument was assigned.
This function should be called without holding the Python GIL, and
has to grab it for error reporting.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.fromstr">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fromstr</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ip</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">endptr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.fromstr" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that converts the string pointed to by
<code class="docutils literal notranslate"><span class="pre">str</span></code> to one element of the corresponding type and places it
in the memory location pointed to by <code class="docutils literal notranslate"><span class="pre">ip</span></code>. After the
conversion is completed, <code class="docutils literal notranslate"><span class="pre">*endptr</span></code> points to the rest of the
string. The last argument <code class="docutils literal notranslate"><span class="pre">arr</span></code> is the array into which ip
points (needed for variable-size data- types). Returns 0 on
success or -1 on failure. Requires a behaved array.
This function should be called without holding the Python GIL, and
has to grab it for error reporting.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.nonzero">
<a class="reference internal" href="dtype.html#c.npy_bool" title="npy_bool"><span class="n"><span class="pre">npy_bool</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nonzero</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.nonzero" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that returns TRUE if the item of
<code class="docutils literal notranslate"><span class="pre">arr</span></code> pointed to by <code class="docutils literal notranslate"><span class="pre">data</span></code> is nonzero. This function can
deal with misbehaved arrays.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.fill">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fill</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.fill" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that fills a contiguous array of given
length with data. The first two elements of the array must
already be filled- in. From these two values, a delta will be
computed and the values from item 3 to the end will be
computed by repeatedly adding this computed delta. The data
buffer must be well-behaved.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.fillwithscalar">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fillwithscalar</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.fillwithscalar" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that fills a contiguous <code class="docutils literal notranslate"><span class="pre">buffer</span></code> of
the given <code class="docutils literal notranslate"><span class="pre">length</span></code> with a single scalar <code class="docutils literal notranslate"><span class="pre">value</span></code> whose
address is given. The final argument is the array which is
needed to get the itemsize for variable-length arrays.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.sort">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sort</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">start</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.sort" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of function pointers to a particular sorting
algorithms. A particular sorting algorithm is obtained using a
key (so far <a class="reference internal" href="array.html#c.NPY_SORTKIND.NPY_QUICKSORT" title="NPY_SORTKIND.NPY_QUICKSORT"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_QUICKSORT</span></code></a>, <a class="reference internal" href="array.html#c.NPY_SORTKIND.NPY_HEAPSORT" title="NPY_SORTKIND.NPY_HEAPSORT"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_HEAPSORT</span></code></a>,
and <a class="reference internal" href="array.html#c.NPY_SORTKIND.NPY_MERGESORT" title="NPY_SORTKIND.NPY_MERGESORT"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_MERGESORT</span></code></a> are defined). These sorts are done
in-place assuming contiguous and aligned data.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.argsort">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">argsort</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">start</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">result</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">length</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.argsort" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of function pointers to sorting algorithms for this
data type. The same sorting algorithms as for sort are
available. The indices producing the sort are returned in
<code class="docutils literal notranslate"><span class="pre">result</span></code> (which must be initialized with indices 0 to
<code class="docutils literal notranslate"><span class="pre">length-1</span></code> inclusive).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.castdict">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">castdict</span></span></span><a class="headerlink" href="#c.PyArray_ArrFuncs.castdict" title="Link to this definition">#</a><br /></dt>
<dd><p>Either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or a dictionary containing low-level casting
functions for user- defined data-types. Each function is
wrapped in a <span class="c-expr sig sig-inline c"><a class="reference external" href="https://docs.python.org/3/c-api/capsule.html#c.PyCapsule" title="(in Python v3.12)"><span class="n">PyCapsule</span></a><span class="p">*</span></span> and keyed by
the data-type number.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.scalarkind">
<a class="reference internal" href="array.html#c.NPY_SCALARKIND" title="NPY_SCALARKIND"><span class="n"><span class="pre">NPY_SCALARKIND</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">scalarkind</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><span class="n"><span class="pre">PyArrayObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.scalarkind" title="Link to this definition">#</a><br /></dt>
<dd><p>A function to determine how scalars of this type should be
interpreted. The argument is <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or a 0-dimensional array
containing the data (if that is needed to determine the kind
of scalar). The return value must be of type
<a class="reference internal" href="array.html#c.NPY_SCALARKIND" title="NPY_SCALARKIND"><code class="xref c c-type docutils literal notranslate"><span class="pre">NPY_SCALARKIND</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.cancastscalarkindto">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">cancastscalarkindto</span></span></span><a class="headerlink" href="#c.PyArray_ArrFuncs.cancastscalarkindto" title="Link to this definition">#</a><br /></dt>
<dd><p>Either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or an array of <a class="reference internal" href="array.html#c.NPY_SCALARKIND.NPY_NSCALARKINDS" title="NPY_SCALARKIND.NPY_NSCALARKINDS"><code class="xref c c-enumerator docutils literal notranslate"><span class="pre">NPY_NSCALARKINDS</span></code></a>
pointers. These pointers should each be either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or a
pointer to an array of integers (terminated by
<a class="reference internal" href="dtype.html#c.NPY_NOTYPE" title="NPY_NOTYPE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NOTYPE</span></code></a>) indicating data-types that a scalar of
this data-type of the specified kind can be cast to safely
(this usually means without losing precision).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.cancastto">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">cancastto</span></span></span><a class="headerlink" href="#c.PyArray_ArrFuncs.cancastto" title="Link to this definition">#</a><br /></dt>
<dd><p>Either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or an array of integers (terminated by
<a class="reference internal" href="dtype.html#c.NPY_NOTYPE" title="NPY_NOTYPE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_NOTYPE</span></code></a> ) indicated data-types that this data-type
can be cast to safely (this usually means without losing
precision).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_ArrFuncs.argmin">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">argmin</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="n"><span class="pre">n</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">min_ind</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyArray_ArrFuncs.argmin" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a function that retrieves the index of the
smallest of <code class="docutils literal notranslate"><span class="pre">n</span></code> elements in <code class="docutils literal notranslate"><span class="pre">arr</span></code> beginning at the element
pointed to by <code class="docutils literal notranslate"><span class="pre">data</span></code>. This function requires that the
memory segment be contiguous and behaved. The return value is
always 0. The index of the smallest element is returned in
<code class="docutils literal notranslate"><span class="pre">min_ind</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pyarraymethod-context-and-pyarraymethod-spec">
<span id="arraymethod-structs"></span><h3>PyArrayMethod_Context and PyArrayMethod_Spec<a class="headerlink" href="#pyarraymethod-context-and-pyarraymethod-spec" title="Link to this heading">#</a></h3>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayMethodObject_tag">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMethodObject_tag</span></span></span><a class="headerlink" href="#c.PyArrayMethodObject_tag" title="Link to this definition">#</a><br /></dt>
<dd><p>An opaque struct used to represent the method “self” in ArrayMethod loops.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayMethod_Context">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMethod_Context</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Context" title="Link to this definition">#</a><br /></dt>
<dd><p>A struct that is passed in to ArrayMethod loops to provide context for the
runtime usage of the loop.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">caller</span><span class="p">;</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">PyArrayMethodObject_tag</span><span class="w"> </span><span class="o">*</span><span class="n">method</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArray_Descr</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="o">*</span><span class="n">descriptors</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayMethod_Context</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Context.caller">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">caller</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Context.caller" title="Link to this definition">#</a><br /></dt>
<dd><p>The caller, which is typically the ufunc that called the loop. May be
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> when a call is not from a ufunc (e.g. casts).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Context.method">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.PyArrayMethodObject_tag" title="PyArrayMethodObject_tag"><span class="n"><span class="pre">PyArrayMethodObject_tag</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">method</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Context.method" title="Link to this definition">#</a><br /></dt>
<dd><p>The method “self”. Currently this object is an opaque pointer.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Context.descriptors">
<a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">descriptors</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Context.descriptors" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of descriptors for the ufunc loop, filled in by
<code class="docutils literal notranslate"><span class="pre">resolve_descriptors</span></code>. The length of the array is <code class="docutils literal notranslate"><span class="pre">nin</span></code> + <code class="docutils literal notranslate"><span class="pre">nout</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMethod_Spec</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec" title="Link to this definition">#</a><br /></dt>
<dd><p>A struct used to register an ArrayMethod with NumPy. We use the slots
mechanism used by the Python limited API. See below for the slot definitions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">nin</span><span class="p">,</span><span class="w"> </span><span class="n">nout</span><span class="p">;</span>
<span class="w">   </span><span class="n">NPY_CASTING</span><span class="w"> </span><span class="n">casting</span><span class="p">;</span>
<span class="w">   </span><span class="n">NPY_ARRAYMETHOD_FLAGS</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">   </span><span class="n">PyArray_DTypeMeta</span><span class="w"> </span><span class="o">**</span><span class="n">dtypes</span><span class="p">;</span>
<span class="w">   </span><span class="n">PyType_Slot</span><span class="w"> </span><span class="o">*</span><span class="n">slots</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayMethod_Spec</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.name">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.name" title="Link to this definition">#</a><br /></dt>
<dd><p>The name of the loop.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.nin">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nin</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.nin" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of input operands</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.nout">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nout</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.nout" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of output operands.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.casting">
<a class="reference internal" href="array.html#c.NPY_CASTING" title="NPY_CASTING"><span class="n"><span class="pre">NPY_CASTING</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">casting</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.casting" title="Link to this definition">#</a><br /></dt>
<dd><p>Used to indicate how minimally permissive a casting operation should
be. For example, if a cast operation might in some circumstances be safe,
but in others unsafe, then <code class="docutils literal notranslate"><span class="pre">NPY_UNSAFE_CASTING</span></code> should be set. Not used
for ufunc loops but must still be set.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.flags">
<a class="reference internal" href="array.html#c.NPY_ARRAYMETHOD_FLAGS" title="NPY_ARRAYMETHOD_FLAGS"><span class="n"><span class="pre">NPY_ARRAYMETHOD_FLAGS</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>The flags set for the method.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.dtypes">
<a class="reference internal" href="#c.PyArray_DTypeMeta" title="PyArray_DTypeMeta"><span class="n"><span class="pre">PyArray_DTypeMeta</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dtypes</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.dtypes" title="Link to this definition">#</a><br /></dt>
<dd><p>The DTypes for the loop. Must be <code class="docutils literal notranslate"><span class="pre">nin</span></code> + <code class="docutils literal notranslate"><span class="pre">nout</span></code> in length.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMethod_Spec.slots">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyType_Slot" title="(in Python v3.12)"><span class="n"><span class="pre">PyType_Slot</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">slots</span></span></span><a class="headerlink" href="#c.PyArrayMethod_Spec.slots" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of slots for the method. Slot IDs must be one of the values
below.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pyarray-dtypemeta-and-pyarraydtypemeta-spec">
<span id="dtypemeta"></span><h3>PyArray_DTypeMeta and PyArrayDTypeMeta_Spec<a class="headerlink" href="#pyarray-dtypemeta-and-pyarraydtypemeta-spec" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayDTypeMeta_Type</span></span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>The python type object corresponding to <a class="reference internal" href="#c.PyArray_DTypeMeta" title="PyArray_DTypeMeta"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArray_DTypeMeta</span></code></a>.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_DTypeMeta</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta" title="Link to this definition">#</a><br /></dt>
<dd><p>A largely opaque struct representing DType classes. Each instance defines a
metaclass for a single NumPy data type. Data types can either be
non-parametric or parametric. For non-parametric types, the DType class has
a one-to-one correspondence with the descriptor instance created from the
DType class. Parametric types can correspond to many different dtype
instances depending on the chosen parameters. This type is available in the
public <code class="docutils literal notranslate"><span class="pre">numpy/dtype_api.h</span></code> header. Currently use of this struct is not
supported in the limited CPython API, so if <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> is set, this
type is a typedef for <code class="docutils literal notranslate"><span class="pre">PyTypeObject</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">PyHeapTypeObject</span><span class="w"> </span><span class="n">super</span><span class="p">;</span>
<span class="w">     </span><span class="n">PyArray_Descr</span><span class="w"> </span><span class="o">*</span><span class="n">singleton</span><span class="p">;</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">type_num</span><span class="p">;</span>
<span class="w">     </span><span class="n">PyTypeObject</span><span class="w"> </span><span class="o">*</span><span class="n">scalar_type</span><span class="p">;</span>
<span class="w">     </span><span class="n">npy_uint64</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">dt_slots</span><span class="p">;</span>
<span class="w">     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArray_DTypeMeta</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.super">
<span class="n"><span class="pre">PyHeapTypeObject</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">super</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.super" title="Link to this definition">#</a><br /></dt>
<dd><p>The superclass, providing hooks into the python object
API. Set members of this struct to fill in the functions
implementing the <code class="docutils literal notranslate"><span class="pre">PyTypeObject</span></code> API (e.g. <code class="docutils literal notranslate"><span class="pre">tp_new</span></code>).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.singleton">
<a class="reference internal" href="#c.PyArray_Descr" title="PyArray_Descr"><span class="n"><span class="pre">PyArray_Descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">singleton</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.singleton" title="Link to this definition">#</a><br /></dt>
<dd><p>A descriptor instance suitable for use as a singleton
descriptor for the data type. This is useful for
non-parametric types representing simple plain old data type
where there is only one logical descriptor instance for all
data of the type. Can be NULL if a singleton instance is not
appropriate.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.type_num">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type_num</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.type_num" title="Link to this definition">#</a><br /></dt>
<dd><p>Corresponds to the type number for legacy data types. Data
types defined outside of NumPy and possibly future data types
shipped with NumPy will have <code class="docutils literal notranslate"><span class="pre">type_num</span></code> set to -1, so this
should not be relied on to discriminate between data types.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.scalar_type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">scalar_type</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.scalar_type" title="Link to this definition">#</a><br /></dt>
<dd><p>The type of scalar instances for this data type.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.flags">
<a class="reference internal" href="dtype.html#c.npy_uint64" title="npy_uint64"><span class="n"><span class="pre">npy_uint64</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Flags can be set to indicate to NumPy that this data type
has optional behavior. See <a class="reference internal" href="array.html#dtype-flags"><span class="std std-ref">Flags</span></a> for a listing of
allowed flag values.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_DTypeMeta.dt_slots">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dt_slots</span></span></span><a class="headerlink" href="#c.PyArray_DTypeMeta.dt_slots" title="Link to this definition">#</a><br /></dt>
<dd><p>An opaque pointer to a private struct containing
implementations of functions in the DType API. This is filled
in from the <code class="docutils literal notranslate"><span class="pre">slots</span></code> member of the <code class="docutils literal notranslate"><span class="pre">PyArrayDTypeMeta_Spec</span></code>
instance used to initialize the DType.</p>
</dd></dl>

</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Spec">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayDTypeMeta_Spec</span></span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Spec" title="Link to this definition">#</a><br /></dt>
<dd><p>A struct used to initialize a new DType with the
<code class="docutils literal notranslate"><span class="pre">PyArrayInitDTypeMeta_FromSpec</span></code> function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyTypeObject</span><span class="w"> </span><span class="o">*</span><span class="n">typeobj</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyArrayMethod_Spec</span><span class="w"> </span><span class="o">**</span><span class="n">casts</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyType_Slot</span><span class="w"> </span><span class="o">*</span><span class="n">slots</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyTypeObject</span><span class="w"> </span><span class="o">*</span><span class="n">baseclass</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Spec.typeobj">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">typeobj</span></span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Spec.typeobj" title="Link to this definition">#</a><br /></dt>
<dd><p>Either <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or the type of the python scalar associated with
the DType. Scalar indexing into an array returns an item with this
type.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Spec.flags">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Spec.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Static flags for the DType class, indicating whether the DType is
parametric, abstract, or represents numeric data. The latter is
optional but is useful to set to indicate to downstream code if
the DType represents data that are numbers (ints, floats, or other
numeric data type) or something else (e.g. a string, unit, or
date).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Spec.casts">
<a class="reference internal" href="#c.PyArrayMethod_Spec" title="PyArrayMethod_Spec"><span class="n"><span class="pre">PyArrayMethod_Spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">casts</span></span></span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Spec.casts" title="Link to this definition">#</a><br /></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-terminated array of ArrayMethod specifications for
casts defined by the DType.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayDTypeMeta_Spec.slots">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyType_Slot" title="(in Python v3.12)"><span class="n"><span class="pre">PyType_Slot</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">slots</span></span></span><span class="p"><span class="pre">;</span></span><a class="headerlink" href="#c.PyArrayDTypeMeta_Spec.slots" title="Link to this definition">#</a><br /></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-terminated array of slot specifications for implementations
of functions in the DType API. Slot IDs must be one of the
DType slot IDs enumerated in <a class="reference internal" href="array.html#dtype-slots"><span class="std std-ref">Slot IDs and API Function Typedefs</span></a>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="exposed-dtypes-classes-pyarray-dtypemeta-objects">
<h3>Exposed DTypes classes (<code class="docutils literal notranslate"><span class="pre">PyArray_DTypeMeta</span></code> objects)<a class="headerlink" href="#exposed-dtypes-classes-pyarray-dtypemeta-objects" title="Link to this heading">#</a></h3>
<p>For use with promoters, NumPy exposes a number of Dtypes following the
pattern <code class="docutils literal notranslate"><span class="pre">PyArray_&lt;Name&gt;DType</span></code> corresponding to those found in <em class="xref py py-obj">np.dtypes</em>.</p>
<p>Additionally, the three DTypes, <code class="docutils literal notranslate"><span class="pre">PyArray_PyLongDType</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyArray_PyFloatDType</span></code>, <code class="docutils literal notranslate"><span class="pre">PyArray_PyComplexDType</span></code> correspond to the
Python scalar values.  These cannot be used in all places, but do allow
for example the common dtype operation and implementing promotion with them
may be necessary.</p>
<p>Further, the following abstract DTypes are defined which cover both the
builtin NumPy ones and the python ones, and users can in principle subclass
from them (this does not inherit any DType specific functionality):
* <code class="docutils literal notranslate"><span class="pre">PyArray_IntAbstractDType</span></code>
* <code class="docutils literal notranslate"><span class="pre">PyArray_FloatAbstractDType</span></code>
* <code class="docutils literal notranslate"><span class="pre">PyArray_ComplexAbstractDType</span></code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of NumPy 2.0, the <em>only</em> valid use for these DTypes is registering a
promoter conveniently to e.g. match “any integers” (and subclass checks).
Because of this, they are not exposed to Python.</p>
</div>
</section>
<section id="pyufunc-type-and-pyufuncobject">
<h3>PyUFunc_Type and PyUFuncObject<a class="headerlink" href="#pyufunc-type-and-pyufuncobject" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyUFunc_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyUFunc_Type</span></span></span><a class="headerlink" href="#c.PyUFunc_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>The ufunc object is implemented by creation of the
<a class="reference internal" href="#c.PyUFunc_Type" title="PyUFunc_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_Type</span></code></a>. It is a very simple type that implements only
basic getattribute behavior, printing behavior, and has call
behavior which allows these objects to act like functions. The
basic idea behind the ufunc is to hold a reference to fast
1-dimensional (vector) loops for each data type that supports the
operation. These one-dimensional loops all have the same signature
and are the key to creating a new ufunc. They are called by the
generic looping code as appropriate to implement the N-dimensional
function. There are also some generic 1-d loops defined for
floating and complexfloating arrays that allow you to define a
ufunc using a single scalar function (<em>e.g.</em> atanh).</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyUFuncObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyUFuncObject</span></span></span><a class="headerlink" href="#c.PyUFuncObject" title="Link to this definition">#</a><br /></dt>
<dd><p>The core of the ufunc is the <a class="reference internal" href="#c.PyUFuncObject" title="PyUFuncObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyUFuncObject</span></code></a> which contains all
the information needed to call the underlying C-code loops that
perform the actual work. While it is described here for completeness, it
should be considered internal to NumPy and manipulated via <code class="docutils literal notranslate"><span class="pre">PyUFunc_*</span></code>
functions. The size of this structure is subject to change across versions
of NumPy. To ensure compatibility:</p>
<ul class="simple">
<li><p>Never declare a non-pointer instance of the struct</p></li>
<li><p>Never perform pointer arithmetic</p></li>
<li><p>Never use <code class="docutils literal notranslate"><span class="pre">sizeof(PyUFuncObject)</span></code></p></li>
</ul>
<p>It has the following structure:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nin</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nout</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nargs</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">identity</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyUFuncGenericFunction</span><span class="w"> </span><span class="o">*</span><span class="n">functions</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">**</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ntypes</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">reserved1</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">types</span><span class="p">;</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">doc</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">obj</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">userloops</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">core_enabled</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">core_num_dim_ix</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">core_num_dims</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">core_dim_ixs</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">core_offsets</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">core_signature</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyUFunc_TypeResolutionFunc</span><span class="w"> </span><span class="o">*</span><span class="n">type_resolver</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">reserved2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">reserved3</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_uint32</span><span class="w"> </span><span class="o">*</span><span class="n">op_flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_uint32</span><span class="w"> </span><span class="o">*</span><span class="n">iter_flags</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/* new in API version 0x0000000D */</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">core_dim_sizes</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_uint32</span><span class="w"> </span><span class="o">*</span><span class="n">core_dim_flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">identity_value</span><span class="p">;</span>
<span class="w">    </span><span class="cm">/* Further private slots (size depends on the NumPy version) */</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyUFuncObject</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.nin">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nin</span></span></span><a class="headerlink" href="#c.PyUFuncObject.nin" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of input arguments.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.nout">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nout</span></span></span><a class="headerlink" href="#c.PyUFuncObject.nout" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of output arguments.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.nargs">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nargs</span></span></span><a class="headerlink" href="#c.PyUFuncObject.nargs" title="Link to this definition">#</a><br /></dt>
<dd><p>The total number of arguments (<em>nin</em> + <em>nout</em>). This must be
less than <a class="reference internal" href="array.html#c.NPY_MAXARGS" title="NPY_MAXARGS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_MAXARGS</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.identity">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">identity</span></span></span><a class="headerlink" href="#c.PyUFuncObject.identity" title="Link to this definition">#</a><br /></dt>
<dd><p>Either <a class="reference internal" href="ufunc.html#c.PyUFunc_One" title="PyUFunc_One"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_One</span></code></a>, <a class="reference internal" href="ufunc.html#c.PyUFunc_Zero" title="PyUFunc_Zero"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_Zero</span></code></a>,
<a class="reference internal" href="ufunc.html#c.PyUFunc_MinusOne" title="PyUFunc_MinusOne"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_MinusOne</span></code></a>, <a class="reference internal" href="ufunc.html#c.PyUFunc_None" title="PyUFunc_None"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_None</span></code></a>,
<a class="reference internal" href="ufunc.html#c.PyUFunc_ReorderableNone" title="PyUFunc_ReorderableNone"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_ReorderableNone</span></code></a>, or
<a class="reference internal" href="ufunc.html#c.PyUFunc_IdentityValue" title="PyUFunc_IdentityValue"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_IdentityValue</span></code></a> to indicate
the identity for this operation. It is only used for a
reduce-like call on an empty array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.functions">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">functions</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dims</span></span>, <a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">steps</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">extradata</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.PyUFuncObject.functions" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of function pointers — one for each data type
supported by the ufunc. This is the vector loop that is called
to implement the underlying function <em>dims</em> [0] times. The
first argument, <em>args</em>, is an array of <em>nargs</em> pointers to
behaved memory. Pointers to the data for the input arguments
are first, followed by the pointers to the data for the output
arguments. How many bytes must be skipped to get to the next
element in the sequence is specified by the corresponding entry
in the <em>steps</em> array. The last argument allows the loop to
receive extra information.  This is commonly used so that a
single, generic vector loop can be used for multiple
functions. In this case, the actual scalar function to call is
passed in as <em>extradata</em>. The size of this function pointer
array is ntypes.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.data">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#c.PyUFuncObject.data" title="Link to this definition">#</a><br /></dt>
<dd><p>Extra data to be passed to the 1-d vector loops or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if
no extra-data is needed. This C-array must be the same size (
<em>i.e.</em> ntypes) as the functions array. <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is used if
extra_data is not needed. Several C-API calls for UFuncs are
just 1-d vector loops that make use of this extra data to
receive a pointer to the actual function to call.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.ntypes">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ntypes</span></span></span><a class="headerlink" href="#c.PyUFuncObject.ntypes" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of supported data types for the ufunc. This number
specifies how many different 1-d loops (of the builtin data
types) are available.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.name">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#c.PyUFuncObject.name" title="Link to this definition">#</a><br /></dt>
<dd><p>A string name for the ufunc. This is used dynamically to build
the __doc__ attribute of ufuncs.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.types">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">types</span></span></span><a class="headerlink" href="#c.PyUFuncObject.types" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of <span class="math notranslate nohighlight">\(nargs \times ntypes\)</span> 8-bit type_numbers
which contains the type signature for the function for each of
the supported (builtin) data types. For each of the <em>ntypes</em>
functions, the corresponding set of type numbers in this array
shows how the <em>args</em> argument should be interpreted in the 1-d
vector loop. These type numbers do not have to be the same type
and mixed-type ufuncs are supported.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.doc">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">doc</span></span></span><a class="headerlink" href="#c.PyUFuncObject.doc" title="Link to this definition">#</a><br /></dt>
<dd><p>Documentation for the ufunc. Should not contain the function
signature as this is generated dynamically when __doc__ is
retrieved.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.ptr">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ptr</span></span></span><a class="headerlink" href="#c.PyUFuncObject.ptr" title="Link to this definition">#</a><br /></dt>
<dd><p>Any dynamically allocated memory. Currently, this is used for
dynamic ufuncs created from a python function to store room for
the types, data, and name members.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.obj">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">obj</span></span></span><a class="headerlink" href="#c.PyUFuncObject.obj" title="Link to this definition">#</a><br /></dt>
<dd><p>For ufuncs dynamically created from python functions, this member
holds a reference to the underlying Python function.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.userloops">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">userloops</span></span></span><a class="headerlink" href="#c.PyUFuncObject.userloops" title="Link to this definition">#</a><br /></dt>
<dd><p>A dictionary of user-defined 1-d vector loops (stored as CObject
ptrs) for user-defined types. A loop may be registered by the
user for any user-defined type. It is retrieved by type number.
User defined type numbers are always larger than
<a class="reference internal" href="dtype.html#c.NPY_USERDEF" title="NPY_USERDEF"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_USERDEF</span></code></a>.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_enabled">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_enabled</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_enabled" title="Link to this definition">#</a><br /></dt>
<dd><p>0 for scalar ufuncs; 1 for generalized ufuncs</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_num_dim_ix">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_num_dim_ix</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_num_dim_ix" title="Link to this definition">#</a><br /></dt>
<dd><p>Number of distinct core dimension names in the signature</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_num_dims">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_num_dims</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_num_dims" title="Link to this definition">#</a><br /></dt>
<dd><p>Number of core dimensions of each argument</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_dim_ixs">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_dim_ixs</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_dim_ixs" title="Link to this definition">#</a><br /></dt>
<dd><p>Dimension indices in a flattened form; indices of argument <code class="docutils literal notranslate"><span class="pre">k</span></code> are
stored in <code class="docutils literal notranslate"><span class="pre">core_dim_ixs[core_offsets[k]</span> <span class="pre">:</span> <span class="pre">core_offsets[k]</span> <span class="pre">+</span>
<span class="pre">core_numdims[k]]</span></code></p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_offsets">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_offsets</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_offsets" title="Link to this definition">#</a><br /></dt>
<dd><p>Position of 1st core dimension of each argument in <code class="docutils literal notranslate"><span class="pre">core_dim_ixs</span></code>,
equivalent to cumsum(<code class="docutils literal notranslate"><span class="pre">core_num_dims</span></code>)</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_signature">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_signature</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_signature" title="Link to this definition">#</a><br /></dt>
<dd><p>Core signature string</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.type_resolver">
<a class="reference internal" href="#c.PyUFuncObject.type_resolver.PyUFunc_TypeResolutionFunc" title="PyUFunc_TypeResolutionFunc"><span class="n"><span class="pre">PyUFunc_TypeResolutionFunc</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">type_resolver</span></span></span><a class="headerlink" href="#c.PyUFuncObject.type_resolver" title="Link to this definition">#</a><br /></dt>
<dd><p>A function which resolves the types and fills an array with the dtypes
for the inputs and outputs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyUFuncObject.type_resolver.PyUFunc_TypeResolutionFunc">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyUFunc_TypeResolutionFunc</span></span></span><a class="headerlink" href="#c.PyUFuncObject.type_resolver.PyUFunc_TypeResolutionFunc" title="Link to this definition">#</a><br /></dt>
<dd><p>The function pointer type for <a class="reference internal" href="#c.PyUFuncObject.type_resolver" title="type_resolver"><code class="xref c c-member docutils literal notranslate"><span class="pre">type_resolver</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.op_flags">
<a class="reference internal" href="dtype.html#c.npy_uint32" title="npy_uint32"><span class="n"><span class="pre">npy_uint32</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">op_flags</span></span></span><a class="headerlink" href="#c.PyUFuncObject.op_flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Override the default operand flags for each ufunc operand.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.iter_flags">
<a class="reference internal" href="dtype.html#c.npy_uint32" title="npy_uint32"><span class="n"><span class="pre">npy_uint32</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iter_flags</span></span></span><a class="headerlink" href="#c.PyUFuncObject.iter_flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Override the default nditer flags for the ufunc.</p>
</dd></dl>

<p>Added in API version 0x0000000D</p>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_dim_sizes">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_dim_sizes</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_dim_sizes" title="Link to this definition">#</a><br /></dt>
<dd><p>For each distinct core dimension, the possible
<a class="reference internal" href="generalized-ufuncs.html#frozen"><span class="std std-ref">frozen</span></a> size if
<a class="reference internal" href="#c.UFUNC_CORE_DIM_SIZE_INFERRED" title="UFUNC_CORE_DIM_SIZE_INFERRED"><code class="xref c c-data docutils literal notranslate"><span class="pre">UFUNC_CORE_DIM_SIZE_INFERRED</span></code></a> is <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.core_dim_flags">
<a class="reference internal" href="dtype.html#c.npy_uint32" title="npy_uint32"><span class="n"><span class="pre">npy_uint32</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">core_dim_flags</span></span></span><a class="headerlink" href="#c.PyUFuncObject.core_dim_flags" title="Link to this definition">#</a><br /></dt>
<dd><p>For each distinct core dimension, a set of flags (
<a class="reference internal" href="#c.UFUNC_CORE_DIM_CAN_IGNORE" title="UFUNC_CORE_DIM_CAN_IGNORE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">UFUNC_CORE_DIM_CAN_IGNORE</span></code></a> and
<a class="reference internal" href="#c.UFUNC_CORE_DIM_SIZE_INFERRED" title="UFUNC_CORE_DIM_SIZE_INFERRED"><code class="xref c c-macro docutils literal notranslate"><span class="pre">UFUNC_CORE_DIM_SIZE_INFERRED</span></code></a>)</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyUFuncObject.identity_value">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">identity_value</span></span></span><a class="headerlink" href="#c.PyUFuncObject.identity_value" title="Link to this definition">#</a><br /></dt>
<dd><p>Identity for reduction, when <a class="reference internal" href="#c.PyUFuncObject.identity" title="PyUFuncObject.identity"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyUFuncObject.identity</span></code></a>
is equal to <a class="reference internal" href="ufunc.html#c.PyUFunc_IdentityValue" title="PyUFunc_IdentityValue"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyUFunc_IdentityValue</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.UFUNC_CORE_DIM_CAN_IGNORE">
<span class="sig-name descname"><span class="n"><span class="pre">UFUNC_CORE_DIM_CAN_IGNORE</span></span></span><a class="headerlink" href="#c.UFUNC_CORE_DIM_CAN_IGNORE" title="Link to this definition">#</a><br /></dt>
<dd><p>if the dim name ends in <code class="docutils literal notranslate"><span class="pre">?</span></code></p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.UFUNC_CORE_DIM_SIZE_INFERRED">
<span class="sig-name descname"><span class="n"><span class="pre">UFUNC_CORE_DIM_SIZE_INFERRED</span></span></span><a class="headerlink" href="#c.UFUNC_CORE_DIM_SIZE_INFERRED" title="Link to this definition">#</a><br /></dt>
<dd><p>if the dim size will be determined from the operands
and not from a <a class="reference internal" href="generalized-ufuncs.html#frozen"><span class="std std-ref">frozen</span></a> signature</p>
</dd></dl>

</section>
<section id="pyarrayiter-type-and-pyarrayiterobject">
<h3>PyArrayIter_Type and PyArrayIterObject<a class="headerlink" href="#pyarrayiter-type-and-pyarrayiterobject" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayIter_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayIter_Type</span></span></span><a class="headerlink" href="#c.PyArrayIter_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>This is an iterator object that makes it easy to loop over an
N-dimensional array. It is the object returned from the flat
attribute of an ndarray. It is also used extensively throughout the
implementation internals to loop over an N-dimensional array. The
tp_as_mapping interface is implemented so that the iterator object
can be indexed (using 1-d indexing), and a few methods are
implemented through the tp_methods table. This object implements the
next method and can be used anywhere an iterator can be used in
Python.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayIterObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayIterObject</span></span></span><a class="headerlink" href="#c.PyArrayIterObject" title="Link to this definition">#</a><br /></dt>
<dd><p>The C-structure corresponding to an object of <a class="reference internal" href="#c.PyArrayIter_Type" title="PyArrayIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayIter_Type</span></code></a> is
the <a class="reference internal" href="#c.PyArrayIterObject" title="PyArrayIterObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayIterObject</span></code></a>. The <a class="reference internal" href="#c.PyArrayIterObject" title="PyArrayIterObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayIterObject</span></code></a> is used to
keep track of a pointer into an N-dimensional array. It contains associated
information used to quickly march through the array. The pointer can
be adjusted in three basic ways: 1) advance to the “next” position in
the array in a C-style contiguous fashion, 2) advance to an arbitrary
N-dimensional coordinate in the array, and 3) advance to an arbitrary
one-dimensional index into the array. The members of the
<a class="reference internal" href="#c.PyArrayIterObject" title="PyArrayIterObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayIterObject</span></code></a> structure are used in these
calculations. Iterator objects keep their own dimension and strides
information about an array. This can be adjusted as needed for
“broadcasting,” or to loop over only specific dimensions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="kt">int</span><span class="w">   </span><span class="n">nd_m1</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">index</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">coordinates</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">dims_m1</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">strides</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">backstrides</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w">  </span><span class="n">factors</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArrayObject</span><span class="w"> </span><span class="o">*</span><span class="n">ao</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w">  </span><span class="o">*</span><span class="n">dataptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_bool</span><span class="w">  </span><span class="n">contiguous</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayIterObject</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.nd_m1">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nd_m1</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.nd_m1" title="Link to this definition">#</a><br /></dt>
<dd><p><span class="math notranslate nohighlight">\(N-1\)</span> where <span class="math notranslate nohighlight">\(N\)</span> is the number of dimensions in the
underlying array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.index">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">index</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.index" title="Link to this definition">#</a><br /></dt>
<dd><p>The current 1-d index into the array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.size">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.size" title="Link to this definition">#</a><br /></dt>
<dd><p>The total size of the underlying array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.coordinates">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">coordinates</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.coordinates" title="Link to this definition">#</a><br /></dt>
<dd><p>An <span class="math notranslate nohighlight">\(N\)</span> -dimensional index into the array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.dims_m1">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dims_m1</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.dims_m1" title="Link to this definition">#</a><br /></dt>
<dd><p>The size of the array minus 1 in each dimension.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.strides">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">strides</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.strides" title="Link to this definition">#</a><br /></dt>
<dd><p>The strides of the array. How many bytes needed to jump to the next
element in each dimension.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.backstrides">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">backstrides</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.backstrides" title="Link to this definition">#</a><br /></dt>
<dd><p>How many bytes needed to jump from the end of a dimension back
to its beginning. Note that <code class="docutils literal notranslate"><span class="pre">backstrides[k]</span> <span class="pre">==</span> <span class="pre">strides[k]</span> <span class="pre">*</span>
<span class="pre">dims_m1[k]</span></code>, but it is stored here as an optimization.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.factors">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">factors</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.factors" title="Link to this definition">#</a><br /></dt>
<dd><p>This array is used in computing an N-d index from a 1-d index. It
contains needed products of the dimensions.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.ao">
<a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><span class="n"><span class="pre">PyArrayObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ao</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.ao" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to the underlying ndarray this iterator was created to
represent.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.dataptr">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dataptr</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.dataptr" title="Link to this definition">#</a><br /></dt>
<dd><p>This member points to an element in the ndarray indicated by the
index.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayIterObject.contiguous">
<a class="reference internal" href="dtype.html#c.npy_bool" title="npy_bool"><span class="n"><span class="pre">npy_bool</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">contiguous</span></span></span><a class="headerlink" href="#c.PyArrayIterObject.contiguous" title="Link to this definition">#</a><br /></dt>
<dd><p>This flag is true if the underlying array is
<a class="reference internal" href="array.html#c.NPY_ARRAY_C_CONTIGUOUS" title="NPY_ARRAY_C_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_C_CONTIGUOUS</span></code></a>. It is used to simplify
calculations when possible.</p>
</dd></dl>

</dd></dl>

<p>How to use an array iterator on a C-level is explained more fully in
later sections. Typically, you do not need to concern yourself with
the internal structure of the iterator object, and merely interact
with it through the use of the macros <a class="reference internal" href="array.html#c.PyArray_ITER_NEXT" title="PyArray_ITER_NEXT"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_ITER_NEXT</span></code></a> (it),
<a class="reference internal" href="array.html#c.PyArray_ITER_GOTO" title="PyArray_ITER_GOTO"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_ITER_GOTO</span></code></a> (it, dest), or <a class="reference internal" href="array.html#c.PyArray_ITER_GOTO1D" title="PyArray_ITER_GOTO1D"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_ITER_GOTO1D</span></code></a>
(it, index). All of these macros require the argument <em>it</em> to be a
<span class="c-expr sig sig-inline c"><a class="reference internal" href="#c.PyArrayIterObject" title="PyArrayIterObject"><span class="n">PyArrayIterObject</span></a><span class="p">*</span></span>.</p>
</section>
<section id="pyarraymultiiter-type-and-pyarraymultiiterobject">
<h3>PyArrayMultiIter_Type and PyArrayMultiIterObject<a class="headerlink" href="#pyarraymultiiter-type-and-pyarraymultiiterobject" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayMultiIter_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMultiIter_Type</span></span></span><a class="headerlink" href="#c.PyArrayMultiIter_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>This type provides an iterator that encapsulates the concept of
broadcasting. It allows <span class="math notranslate nohighlight">\(N\)</span> arrays to be broadcast together
so that the loop progresses in C-style contiguous fashion over the
broadcasted array. The corresponding C-structure is the
<a class="reference internal" href="#c.PyArrayMultiIterObject" title="PyArrayMultiIterObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayMultiIterObject</span></code></a> whose memory layout must begin any
object, <em>obj</em>, passed in to the <a class="reference internal" href="array.html#c.PyArray_Broadcast" title="PyArray_Broadcast"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_Broadcast</span></code></a> (obj)
function. Broadcasting is performed by adjusting array iterators so
that each iterator represents the broadcasted shape and size, but
has its strides adjusted so that the correct element from the array
is used at each iteration.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMultiIterObject</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject" title="Link to this definition">#</a><br /></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">numiter</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">index</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nd</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">dimensions</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArrayIterObject</span><span class="w"> </span><span class="o">*</span><span class="n">iters</span><span class="p">[];</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayMultiIterObject</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.numiter">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">numiter</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.numiter" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of arrays that need to be broadcast to the same shape.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.size">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.size" title="Link to this definition">#</a><br /></dt>
<dd><p>The total broadcasted size.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.index">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">index</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.index" title="Link to this definition">#</a><br /></dt>
<dd><p>The current (1-d) index into the broadcasted result.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.nd">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nd</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.nd" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of dimensions in the broadcasted result.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.dimensions">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dimensions</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.dimensions" title="Link to this definition">#</a><br /></dt>
<dd><p>The shape of the broadcasted result (only <code class="docutils literal notranslate"><span class="pre">nd</span></code> slots are used).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayMultiIterObject.iters">
<a class="reference internal" href="#c.PyArrayIterObject" title="PyArrayIterObject"><span class="n"><span class="pre">PyArrayIterObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">iters</span></span></span><a class="headerlink" href="#c.PyArrayMultiIterObject.iters" title="Link to this definition">#</a><br /></dt>
<dd><p>An array of iterator objects that holds the iterators for the
arrays to be broadcast together. On return, the iterators are
adjusted for broadcasting.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pyarrayneighborhooditer-type-and-pyarrayneighborhooditerobject">
<h3>PyArrayNeighborhoodIter_Type and PyArrayNeighborhoodIterObject<a class="headerlink" href="#pyarrayneighborhooditer-type-and-pyarrayneighborhooditerobject" title="Link to this heading">#</a></h3>
<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayNeighborhoodIter_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayNeighborhoodIter_Type</span></span></span><a class="headerlink" href="#c.PyArrayNeighborhoodIter_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>This is an iterator object that makes it easy to loop over an
N-dimensional neighborhood.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayNeighborhoodIterObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayNeighborhoodIterObject</span></span></span><a class="headerlink" href="#c.PyArrayNeighborhoodIterObject" title="Link to this definition">#</a><br /></dt>
<dd><p>The C-structure corresponding to an object of
<a class="reference internal" href="#c.PyArrayNeighborhoodIter_Type" title="PyArrayNeighborhoodIter_Type"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyArrayNeighborhoodIter_Type</span></code></a> is the
<a class="reference internal" href="#c.PyArrayNeighborhoodIterObject" title="PyArrayNeighborhoodIterObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayNeighborhoodIterObject</span></code></a>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nd_m1</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">coordinates</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">]</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">dims_m1</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">strides</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">backstrides</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">factors</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArrayObject</span><span class="w"> </span><span class="o">*</span><span class="n">ao</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">dataptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_bool</span><span class="w"> </span><span class="n">contiguous</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">bounds</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">limits</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">limits_sizes</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">npy_iter_get_dataptr_t</span><span class="w"> </span><span class="n">translate</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">nd</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">dimensions</span><span class="p">[</span><span class="n">NPY_MAXDIMS_LEGACY_ITERS</span><span class="p">];</span>
<span class="w">    </span><span class="n">PyArrayIterObject</span><span class="o">*</span><span class="w"> </span><span class="n">_internal_iter</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">constant</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">mode</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayNeighborhoodIterObject</span><span class="p">;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="scalararraytypes">
<h3>ScalarArrayTypes<a class="headerlink" href="#scalararraytypes" title="Link to this heading">#</a></h3>
<p>There is a Python type for each of the different built-in data types
that can be present in the array. Most of these are simple wrappers
around the corresponding data type in C. The C-names for these types
are <code class="docutils literal notranslate"><span class="pre">Py{TYPE}ArrType_Type</span></code> where <code class="docutils literal notranslate"><span class="pre">{TYPE}</span></code> can be</p>
<blockquote>
<div><p><strong>Bool</strong>, <strong>Byte</strong>, <strong>Short</strong>, <strong>Int</strong>, <strong>Long</strong>, <strong>LongLong</strong>,
<strong>UByte</strong>, <strong>UShort</strong>, <strong>UInt</strong>, <strong>ULong</strong>, <strong>ULongLong</strong>,
<strong>Half</strong>, <strong>Float</strong>, <strong>Double</strong>, <strong>LongDouble</strong>, <strong>CFloat</strong>,
<strong>CDouble</strong>, <strong>CLongDouble</strong>, <strong>String</strong>, <strong>Unicode</strong>, <strong>Void</strong>,
<strong>Datetime</strong>, <strong>Timedelta</strong>, and <strong>Object</strong>.</p>
</div></blockquote>
<p>These type names are part of the C-API and can therefore be created in
extension C-code. There is also a <code class="docutils literal notranslate"><span class="pre">PyIntpArrType_Type</span></code> and a
<code class="docutils literal notranslate"><span class="pre">PyUIntpArrType_Type</span></code> that are simple substitutes for one of the
integer types that can hold a pointer on the platform. The structure
of these scalar objects is not exposed to C-code. The function
<a class="reference internal" href="array.html#c.PyArray_ScalarAsCtype" title="PyArray_ScalarAsCtype"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_ScalarAsCtype</span></code></a> (..) can be used to extract the C-type
value from the array scalar and the function <a class="reference internal" href="array.html#c.PyArray_Scalar" title="PyArray_Scalar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArray_Scalar</span></code></a>
(…) can be used to construct an array scalar from a C-value.</p>
</section>
</section>
<section id="other-c-structures">
<h2>Other C-structures<a class="headerlink" href="#other-c-structures" title="Link to this heading">#</a></h2>
<p>A few new C-structures were found to be useful in the development of
NumPy. These C-structures are used in at least one C-API call and are
therefore documented here. The main reason these structures were
defined is to make it easy to use the Python ParseTuple C-API to
convert from Python objects to a useful C-Object.</p>
<section id="pyarray-dims">
<h3>PyArray_Dims<a class="headerlink" href="#pyarray-dims" title="Link to this heading">#</a></h3>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_Dims">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_Dims</span></span></span><a class="headerlink" href="#c.PyArray_Dims" title="Link to this definition">#</a><br /></dt>
<dd><p>This structure is very useful when shape and/or strides information
is supposed to be interpreted. The structure is:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArray_Dims</span><span class="p">;</span>
</pre></div>
</div>
<p>The members of this structure are</p>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Dims.ptr">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ptr</span></span></span><a class="headerlink" href="#c.PyArray_Dims.ptr" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to a list of (<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><code class="xref c c-type docutils literal notranslate"><span class="pre">npy_intp</span></code></a>) integers which
usually represent array shape or array strides.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Dims.len">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#c.PyArray_Dims.len" title="Link to this definition">#</a><br /></dt>
<dd><p>The length of the list of integers. It is assumed safe to
access <em>ptr</em> [0] to <em>ptr</em> [len-1].</p>
</dd></dl>

</dd></dl>

</section>
<section id="pyarray-chunk">
<h3>PyArray_Chunk<a class="headerlink" href="#pyarray-chunk" title="Link to this heading">#</a></h3>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyArray_Chunk">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArray_Chunk</span></span></span><a class="headerlink" href="#c.PyArray_Chunk" title="Link to this definition">#</a><br /></dt>
<dd><p>This is equivalent to the buffer object structure in Python up to
the ptr member. On 32-bit platforms (<em>i.e.</em> if <a class="reference internal" href="config.html#c.NPY_SIZEOF_INT" title="NPY_SIZEOF_INT"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_SIZEOF_INT</span></code></a>
== <a class="reference internal" href="config.html#c.NPY_SIZEOF_INTP" title="NPY_SIZEOF_INTP"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_SIZEOF_INTP</span></code></a>), the len member also matches an equivalent
member of the buffer object. It is useful to represent a generic
single-segment chunk of memory.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">PyObject_HEAD</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">base</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArray_Chunk</span><span class="p">;</span>
</pre></div>
</div>
<p>The members are</p>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Chunk.base">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#c.PyArray_Chunk.base" title="Link to this definition">#</a><br /></dt>
<dd><p>The Python object this chunk of memory comes from. Needed so that
memory can be accounted for properly.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Chunk.ptr">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ptr</span></span></span><a class="headerlink" href="#c.PyArray_Chunk.ptr" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer to the start of the single-segment chunk of memory.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Chunk.len">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#c.PyArray_Chunk.len" title="Link to this definition">#</a><br /></dt>
<dd><p>The length of the segment in bytes.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArray_Chunk.flags">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArray_Chunk.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Any data flags (<em>e.g.</em> <a class="reference internal" href="array.html#c.NPY_ARRAY_WRITEABLE" title="NPY_ARRAY_WRITEABLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEABLE</span></code></a> ) that should
be used to interpret the memory.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pyarrayinterface">
<h3>PyArrayInterface<a class="headerlink" href="#pyarrayinterface" title="Link to this heading">#</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../arrays.interface.html#arrays-interface"><span class="std std-ref">The array interface protocol</span></a></p>
</div>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayInterface">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayInterface</span></span></span><a class="headerlink" href="#c.PyArrayInterface" title="Link to this definition">#</a><br /></dt>
<dd><p>The <a class="reference internal" href="#c.PyArrayInterface" title="PyArrayInterface"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayInterface</span></code></a> structure is defined so that NumPy and
other extension modules can use the rapid array interface
protocol. The <a class="reference internal" href="../arrays.interface.html#object.__array_struct__" title="object.__array_struct__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__array_struct__</span></code></a> method of an object that
supports the rapid array interface protocol should return a
<a class="reference external" href="https://docs.python.org/3/c-api/capsule.html#c.PyCapsule" title="(in Python v3.12)"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCapsule</span></code></a> that contains a pointer to a <a class="reference internal" href="#c.PyArrayInterface" title="PyArrayInterface"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayInterface</span></code></a>
structure with the relevant details of the array. After the new
array is created, the attribute should be <code class="docutils literal notranslate"><span class="pre">DECREF</span></code>’d which will
free the <a class="reference internal" href="#c.PyArrayInterface" title="PyArrayInterface"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayInterface</span></code></a> structure. Remember to <code class="docutils literal notranslate"><span class="pre">INCREF</span></code> the
object (whose <a class="reference internal" href="../arrays.interface.html#object.__array_struct__" title="object.__array_struct__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__array_struct__</span></code></a> attribute was retrieved) and
point the base member of the new <a class="reference internal" href="#c.PyArrayObject" title="PyArrayObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyArrayObject</span></code></a> to this same
object. In this way the memory for the array will be managed
correctly.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">two</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nd</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">typekind</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">itemsize</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">shape</span><span class="p">;</span>
<span class="w">    </span><span class="n">npy_intp</span><span class="w"> </span><span class="o">*</span><span class="n">strides</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">descr</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">PyArrayInterface</span><span class="p">;</span>
</pre></div>
</div>
<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.two">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">two</span></span></span><a class="headerlink" href="#c.PyArrayInterface.two" title="Link to this definition">#</a><br /></dt>
<dd><p>the integer 2 as a sanity check.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.nd">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">nd</span></span></span><a class="headerlink" href="#c.PyArrayInterface.nd" title="Link to this definition">#</a><br /></dt>
<dd><p>the number of dimensions in the array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.typekind">
<span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">typekind</span></span></span><a class="headerlink" href="#c.PyArrayInterface.typekind" title="Link to this definition">#</a><br /></dt>
<dd><p>A character indicating what kind of array is present according to the
typestring convention with ‘t’ -&gt; bitfield, ‘b’ -&gt; Boolean, ‘i’ -&gt;
signed integer, ‘u’ -&gt; unsigned integer, ‘f’ -&gt; floating point, ‘c’ -&gt;
complex floating point, ‘O’ -&gt; object, ‘S’ -&gt; (byte-)string, ‘U’ -&gt;
unicode, ‘V’ -&gt; void.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.itemsize">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">itemsize</span></span></span><a class="headerlink" href="#c.PyArrayInterface.itemsize" title="Link to this definition">#</a><br /></dt>
<dd><p>The number of bytes each item in the array requires.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.flags">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">flags</span></span></span><a class="headerlink" href="#c.PyArrayInterface.flags" title="Link to this definition">#</a><br /></dt>
<dd><p>Any of the bits <a class="reference internal" href="array.html#c.NPY_ARRAY_C_CONTIGUOUS" title="NPY_ARRAY_C_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_C_CONTIGUOUS</span></code></a> (1),
<a class="reference internal" href="array.html#c.NPY_ARRAY_F_CONTIGUOUS" title="NPY_ARRAY_F_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_F_CONTIGUOUS</span></code></a> (2), <a class="reference internal" href="array.html#c.NPY_ARRAY_ALIGNED" title="NPY_ARRAY_ALIGNED"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_ALIGNED</span></code></a> (0x100),
<a class="reference internal" href="array.html#c.NPY_ARRAY_NOTSWAPPED" title="NPY_ARRAY_NOTSWAPPED"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_NOTSWAPPED</span></code></a> (0x200), or <a class="reference internal" href="array.html#c.NPY_ARRAY_WRITEABLE" title="NPY_ARRAY_WRITEABLE"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_WRITEABLE</span></code></a>
(0x400) to indicate something about the data. The
<a class="reference internal" href="array.html#c.NPY_ARRAY_ALIGNED" title="NPY_ARRAY_ALIGNED"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_ALIGNED</span></code></a>, <a class="reference internal" href="array.html#c.NPY_ARRAY_C_CONTIGUOUS" title="NPY_ARRAY_C_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_C_CONTIGUOUS</span></code></a>, and
<a class="reference internal" href="array.html#c.NPY_ARRAY_F_CONTIGUOUS" title="NPY_ARRAY_F_CONTIGUOUS"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARRAY_F_CONTIGUOUS</span></code></a> flags can actually be determined from
the other parameters. The flag <a class="reference internal" href="../arrays.interface.html#c.NPY_ARR_HAS_DESCR" title="NPY_ARR_HAS_DESCR"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARR_HAS_DESCR</span></code></a>
(0x800) can also be set to indicate to objects consuming the
version 3 array interface that the descr member of the
structure is present (it will be ignored by objects consuming
version 2 of the array interface).</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.shape">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">shape</span></span></span><a class="headerlink" href="#c.PyArrayInterface.shape" title="Link to this definition">#</a><br /></dt>
<dd><p>An array containing the size of the array in each dimension.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.strides">
<a class="reference internal" href="dtype.html#c.npy_intp" title="npy_intp"><span class="n"><span class="pre">npy_intp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">strides</span></span></span><a class="headerlink" href="#c.PyArrayInterface.strides" title="Link to this definition">#</a><br /></dt>
<dd><p>An array containing the number of bytes to jump to get to the next
element in each dimension.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.data">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#c.PyArrayInterface.data" title="Link to this definition">#</a><br /></dt>
<dd><p>A pointer <em>to</em> the first element of the array.</p>
</dd></dl>

<dl class="c member">
<dt class="sig sig-object c" id="c.PyArrayInterface.descr">
<a class="reference external" href="https://docs.python.org/3/c-api/structures.html#c.PyObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyObject</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">descr</span></span></span><a class="headerlink" href="#c.PyArrayInterface.descr" title="Link to this definition">#</a><br /></dt>
<dd><p>A Python object describing the data-type in more detail (same
as the <em>descr</em> key in <a class="reference internal" href="../arrays.interface.html#object.__array_interface__" title="object.__array_interface__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__array_interface__</span></code></a>). This can be
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <em>typekind</em> and <em>itemsize</em> provide enough
information. This field is also ignored unless
<a class="reference internal" href="../arrays.interface.html#c.NPY_ARR_HAS_DESCR" title="NPY_ARR_HAS_DESCR"><code class="xref c c-data docutils literal notranslate"><span class="pre">NPY_ARR_HAS_DESCR</span></code></a> flag is on in <em>flags</em>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="internally-used-structures">
<h3>Internally used structures<a class="headerlink" href="#internally-used-structures" title="Link to this heading">#</a></h3>
<p>Internally, the code uses some additional Python objects primarily for
memory management. These types are not accessible directly from
Python, and are not exposed to the C-API. They are included here only
for completeness and assistance in understanding the code.</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.PyUFunc_Loop1d">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyUFunc_Loop1d</span></span></span><a class="headerlink" href="#c.PyUFunc_Loop1d" title="Link to this definition">#</a><br /></dt>
<dd><p>A simple linked-list of C-structures containing the information needed
to define a 1-d loop for a ufunc for every defined signature of a
user-defined data-type.</p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.PyArrayMapIter_Type">
<a class="reference external" href="https://docs.python.org/3/c-api/type.html#c.PyTypeObject" title="(in Python v3.12)"><span class="n"><span class="pre">PyTypeObject</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMapIter_Type</span></span></span><a class="headerlink" href="#c.PyArrayMapIter_Type" title="Link to this definition">#</a><br /></dt>
<dd><p>Advanced indexing is handled with this Python type. It is simply a
loose wrapper around the C-structure containing the variables
needed for advanced array indexing.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.PyArrayMapIterObject">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">PyArrayMapIterObject</span></span></span><a class="headerlink" href="#c.PyArrayMapIterObject" title="Link to this definition">#</a><br /></dt>
<dd><p>The C-structure associated with <a class="reference internal" href="#c.PyArrayMapIter_Type" title="PyArrayMapIter_Type"><code class="xref c c-var docutils literal notranslate"><span class="pre">PyArrayMapIter_Type</span></code></a>.
This structure is useful if you are trying to
understand the advanced-index mapping code. It is defined in the
<code class="docutils literal notranslate"><span class="pre">arrayobject.h</span></code> header. This type is not exposed to Python and
could be replaced with a C-structure. As a Python type it takes
advantage of reference- counted memory management.</p>
</dd></dl>

</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NumPy C-API</p>
      </div>
    </a>
    <a class="right-next"
       href="config.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">System configuration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-python-types-defined">New Python types defined</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarray-type-and-pyarrayobject">PyArray_Type and PyArrayObject</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pygenericarrtype-type">PyGenericArrType_Type</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarraydescr-type-and-pyarray-descr">PyArrayDescr_Type and PyArray_Descr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarray-arrfuncs">PyArray_ArrFuncs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarraymethod-context-and-pyarraymethod-spec">PyArrayMethod_Context and PyArrayMethod_Spec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarray-dtypemeta-and-pyarraydtypemeta-spec">PyArray_DTypeMeta and PyArrayDTypeMeta_Spec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exposed-dtypes-classes-pyarray-dtypemeta-objects">Exposed DTypes classes (<code class="docutils literal notranslate"><span class="pre">PyArray_DTypeMeta</span></code> objects)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyufunc-type-and-pyufuncobject">PyUFunc_Type and PyUFuncObject</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarrayiter-type-and-pyarrayiterobject">PyArrayIter_Type and PyArrayIterObject</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarraymultiiter-type-and-pyarraymultiiterobject">PyArrayMultiIter_Type and PyArrayMultiIterObject</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarrayneighborhooditer-type-and-pyarrayneighborhooditerobject">PyArrayNeighborhoodIter_Type and PyArrayNeighborhoodIterObject</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalararraytypes">ScalarArrayTypes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-c-structures">Other C-structures</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarray-dims">PyArray_Dims</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarray-chunk">PyArray_Chunk</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pyarrayinterface">PyArrayInterface</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internally-used-structures">Internally used structures</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2008-2024, NumPy Developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>